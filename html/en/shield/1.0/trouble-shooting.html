
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Appendix 7. Trouble Shooting</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Shield - Elasticsearch Security Plugin [1.0]" /><link rel="up" href="index.html" title="Shield - Elasticsearch Security Plugin [1.0]" /><link rel="prev" href="example.html" title="Appendix 6. Full esusers Example" /><link rel="next" href="reference.html" title="Appendix 8. Reference" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link type="text/css" rel="stylesheet" href="/static/css/en-us.css" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="canonical" href="https://www.elastic.co/guide_template" />

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/guide_template.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


<div class="container w100">
	<div class="row">
		<div class="12u">
			

<section>
	<div class="row">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1><a href="/"></a></h1>
			</div>
			<!-- Searchbar Input box -->
			<form method="get" action="/search" name="searchForm" class="header-search-form">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> 
		</div>
		<div class="4u 6u(small) 6u(xsmall)">
			<!-- Mobile Menu -->
			<div class="mobile-menu-wrapper">
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-guide" id=""></a></li>
					
					<li><a href="/contact" class="m-contact" id=""></a></li>
					
				</ul>											
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >PRODUCTS</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/subscriptions" id="nav_support" >support</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >LEARN</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >COMMUNITY</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >USE CASES</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >BLOG</a></h3>

								
							
								<h3><a href="/about" id="nav_about" >ABOUT</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			</div>
			<!-- Shortcuts -->
			<nav id="shortcuts">
				<ul class="links">
					
						<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
					
						<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
					
						<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
					
						<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
					
				</ul>
			</nav>
		</div>
	</div>
</section>


<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	

	
		.m-shortcuts li a.m-search {
			background: url("/assets/blt174b13be89ff803c/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-guide {
			background: url("/assets/blt5ba03f594a7d610a/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("/assets/blt38c3e853c4b1174d/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Shield - Elasticsearch Security Plugin
      [1.0]
    </a></span> » <span class="breadcrumb-node">Appendix 7. Trouble Shooting</span></div><div class="navheader"><span class="prev"><a href="example.html">
              « 
              Appendix 6. Full <code class="literal">esusers</code> Example</a>
           
        </span><span class="next">
           
          <a href="reference.html">Appendix 8. Reference
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="trouble-shooting"></a>Appendix 7. Trouble Shooting</h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="introduction.html">Introduction</a></span></dt><dt><span class="chapter"><a href="architecture.html">Architecture Overview</a></span></dt><dt><span class="chapter"><a href="quick-getting-started.html">Getting Started (Short Version)</a></span></dt><dt><span class="chapter"><a href="getting-started.html">Getting Started (Long Version)</a></span></dt><dt><span class="chapter"><a href="authorization.html">Authorization</a></span></dt><dt><span class="chapter"><a href="authentication.html">Authentication</a></span></dt><dt><span class="chapter"><a href="securing-nodes.html">Securing Nodes</a></span></dt><dt><span class="chapter"><a href="auditing.html">Auditing</a></span></dt><dt><span class="chapter"><a href="clients.html">Integrating Shield with clients</a></span></dt><dt><span class="chapter"><a href="certificate-authority.html">Appendix 1. Running a Certificate Authority</a></span></dt><dt><span class="chapter"><a href="license-management.html">Appendix 2. License Management</a></span></dt><dt><span class="chapter"><a href="limitations.html">Appendix 3. Limitations</a></span></dt><dt><span class="chapter"><a href="securing-aliases.html">Appendix 4. Securing Indices &amp; Aliases</a></span></dt><dt><span class="chapter"><a href="tribe-node.html">Appendix 5. Tribe Node</a></span></dt><dt><span class="chapter"><a href="example.html">Appendix 6. Full <code class="literal">esusers</code> Example</a></span></dt><dt><span class="chapter"><a href="trouble-shooting.html">Appendix 7. Trouble Shooting</a></span></dt><dt><span class="chapter"><a href="reference.html">Appendix 8. Reference</a></span></dt><dt><span class="chapter"><a href="release-notes.html">Appendix 9. Release Notes</a></span></dt></dl></div><h3><a id="_literal_settings_literal"></a><code class="literal">settings</code></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Some settings are not returned via the nodes settings API
</span></dt><dd><p class="simpara">This is intentional. Some of the settings are considered to be highly sensitive (e.g. all <code class="literal">ssl</code> settings, ldap <code class="literal">bind_dn</code>,
<code class="literal">bind_password</code> and <code class="literal">hostname_verification</code>). For this reason, we filter these settings and not exposing them via the
nodes info API rest endpoint. It is also possible to define additional sensitive settings that should be hidden using
the <code class="literal">shield.hide_settings</code> setting:</p><pre class="programlisting prettyprint lang-yaml">shield.hide_settings: shield.realms.ldap1.url, shield.realms.ad1.*</pre><p class="simpara">The snippet above will also hide the <code class="literal">url</code> settings of the <code class="literal">ldap1</code> realm and all settings of the <code class="literal">ad1</code> realm.</p></dd></dl></div><h3><a id="_literal_esusers_literal"></a><code class="literal">esusers</code></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
I configured the appropriate roles and the users, but I still get an authorization exception
</span></dt><dd><p class="simpara">Verify that the role names associated with the users match the roles defined in the <code class="literal">roles.yml</code> file. You
can use the <code class="literal">esusers</code> tool to list all the users. Any unknown roles are marked with <code class="literal">*</code>.</p><pre class="programlisting prettyprint lang-shell">esusers list
rdeniro        : admin
alpacino       : power_user
jacknich       : marvel,unknown_role* <a id="CO23-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO23-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">unknown_role</code> was not found in <code class="literal">roles.yml</code>
</p></td></tr></table></div></dd></dl></div><h3><a id="trouble-shoot-active-directory"></a>Active Directory</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Certain users are being frequently locked out of Active Directory
</span></dt><dd><p class="simpara">Check your realm configuration; realms are checked serially, one after another. If your Active Directory realm is being checked before other realms and there are usernames
that appear in both Active Directory and another realm, a valid login for one realm may be causing failed login attempts in another realm.</p><p class="simpara">For example, if <code class="literal">UserA</code> exists in both Active Directory and esusers, and the Active Directory realm is checked first and
esusers is checked second, an attempt to authenticate as <code class="literal">UserA</code> in the esusers realm would first attempt to authenticate
against Active Directory and fail, before successfully authenticating against the esusers realm. Because authentication is
verified on each request, the Active Directory realm would be checked - and fail - on each request for <code class="literal">UserA</code> in the esusers
realm. In this case, while the Shield request completed successfully, the account on Active Directory would have received
several failed login attempts, and that account may become temporarily locked out. Plan the order of your realms accordingly.</p><p class="simpara">Also note that it is not typically necessary to define multiple Active Directory realms to handle domain controller failures. When using Microsoft DNS, the DNS entry for
the domain should always point to an available domain controller.</p></dd></dl></div><h3><a id="_ldap"></a>LDAP</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
I can authenticate to LDAP, but I still get an authorization exception
</span></dt><dd><p class="simpara">A number of configuration options can cause this error.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><tbody><tr><td align="left" valign="top"><p><span class="emphasis"><em>group identification</em></span></p></td><td align="left" valign="top"><p>Groups are located by either an LDAP search or by the "memberOf" attribute on
the user.  Also, If subtree search is turned off, it will search only one
level deep.  See the <a class="link" href="ldap.html#ldap-settings" title="Table 3. LDAP Realm Settings">LDAP Settings</a> for all the options.
There are many options here and sticking to the defaults will not work for all
scenarios.</p></td></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>group to role mapping</em></span></p></td><td align="left" valign="top"><p>Either the <code class="literal">role_mapping.yml</code> file or the location for this file could be
misconfigured. See <a class="link" href="reference.html#ref-shield-files" title="Files used by Shield">Shield Files</a> for more.</p></td></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>role definition</em></span></p></td><td align="left" valign="top"><p>Either the <code class="literal">roles.yml</code> file or the location for this file could be
misconfigured. See <a class="link" href="reference.html#ref-shield-files" title="Files used by Shield">Shield Files</a> for more.</p></td></tr></tbody></table></div><p class="simpara">To help track down these possibilities, add <code class="literal">shield.authc: DEBUG</code> to the <code class="literal">logging.yml</code> <a class="link" href="getting-started.html#shield-config">config file</a>.  A successful
authentication should produce debug statements that list groups and role mappings.</p></dd></dl></div><h3><a id="_encryption_amp_certificates"></a>Encryption &amp; Certificates</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">curl</code> on the Mac returns a certificate verification error even when the <code class="literal">--cacert</code> option is used
</span></dt><dd><p class="simpara">Apple’s integration of <code class="literal">curl</code> with their keychain technology disables the <code class="literal">--cacert</code> option.
See <a class="ulink" href="http://curl.haxx.se/mail/archive-2013-10/0036.html" target="_top">http://curl.haxx.se/mail/archive-2013-10/0036.html</a> for more information.</p><p class="simpara">You can use another tool, such as <code class="literal">wget</code>, to test certificates. Alternately, you can add the certificate for the
signing certificate authority MacOS system keychain, using a procedure similar to the one detailed at the
<a class="ulink" href="http://support.apple.com/kb/PH14003" target="_top">Apple knowledge base</a>. Be sure to add the signing CA’s certificate and not the server’s certificate.</p></dd></dl></div><h4><a id="_sslhandshakeexception_causing_connections_to_fail"></a>SSLHandshakeException causing connections to fail</h4><p>A <code class="literal">SSLHandshakeException</code> will cause a connection to a node to fail and indicates that there is a configuration issue. Some of the
common exceptions are shown below with tips on how to resolve these issues.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">java.security.cert.CertificateException: No name matching node01.example.com found</code>
</span></dt><dd><p class="simpara">Indicates that a client connection was made to <code class="literal">node01.example.com</code> but the certificate returned did not contain the name <code class="literal">node01.example.com</code>.
In most cases, the issue can be resolved by ensuring the name is specified as a <code class="literal">SubjectAlternativeName</code> during <a class="link" href="private-key.html" title="Generate a node private key and certificate">certificate creation</a>.
Another scenario is when the environment does not wish to use DNS names in certificates at all. In this scenario, all settings
in <code class="literal">elasticsearch.yml</code> should only use IP addresses and the following setting needs to be set in <code class="literal">elasticsearch.yml</code>:</p><pre class="programlisting prettyprint lang-yaml">shield.ssl.hostname_verification.resolve_name: false</pre></dd><dt><span class="term">
<code class="literal">java.security.cert.CertificateException: No subject alternative names present</code>
</span></dt><dd>Indicates that a client connection was made to an IP address but the returned certificate did not contain any <code class="literal">SubjectAlternativeName</code> entries.
IP addresses are only used for hostname verification if they are specified as a <code class="literal">SubjectAlternativeName</code> during
<a class="link" href="private-key.html" title="Generate a node private key and certificate">certificate creation</a>. If the intent was to use IP addresses for hostname verification, then the certificate
will need to be regenerated. Also verify that <code class="literal">shield.ssl.hostname_verification.resolve_name: false</code> is <span class="strong"><strong>not</strong></span> set in
<code class="literal">elasticsearch.yml</code>.</dd><dt><span class="term">
<code class="literal">javax.net.ssl.SSLHandshakeException: null cert chain</code> and <code class="literal">javax.net.ssl.SSLException: Received fatal alert: bad_certificate</code>
</span></dt><dd>The <code class="literal">SSLHandshakeException</code> above indicates that a self-signed certificate was returned by the client that is not trusted
as it cannot be found in the <code class="literal">truststore</code> or <code class="literal">keystore</code>. The <code class="literal">SSLException</code> above is seen on the client side of the connection.</dd><dt><span class="term">
<code class="literal">sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</code> and <code class="literal">javax.net.ssl.SSLException: Received fatal alert: certificate_unknown</code>
</span></dt><dd>The <code class="literal">SunCertPathBuilderException</code> above indicates that a certificate was returned during the handshake that is not trusted.
This message is seen on the client side of the connection. The <code class="literal">SSLException</code> above is seen on the server side of the
connection. The CA certificate that signed the returned certificate was not found in the <code class="literal">keystore</code> or <code class="literal">truststore</code> and
needs to be added to trust this certificate.</dd></dl></div><h4><a id="_other_ssl_tls_related_exceptions"></a>Other SSL/TLS related exceptions</h4><p>The are other exceptions related to SSL that may be seen in the logs. Below you will find some common exceptions and their
meaning.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">org.elasticsearch.common.netty.handler.ssl.NotSslRecordException: not an SSL/TLS record:</code>
</span></dt><dd>Indicates that there was incoming plaintext traffic on an SSL connection. This typically occurs when a node is not
configured to use encrypted communication and tries to connect to nodes that are using encrypted communication or when a
plain <code class="literal">http</code> request is made to a node that is expecting <code class="literal">https</code> traffic. Please verify that all nodes are using the
same setting for <code class="literal">shield.transport.ssl</code> and that external applications are using <code class="literal">https</code> when using the REST interface.</dd><dt><span class="term">
<code class="literal">java.io.StreamCorruptedException: invalid internal transport message format, got</code>
</span></dt><dd>Indicates an issue with data received on the transport interface in an unknown format. This can happen when a node with
encrypted communication enabled connects to a node that has encrypted communication disabled. Please verify that all
nodes are using the same setting for <code class="literal">shield.transport.ssl</code>.</dd><dt><span class="term">
<code class="literal">java.lang.IllegalArgumentException: empty text</code>
</span></dt><dd><p class="simpara">The exception is typically seen when a <code class="literal">https</code> request is made to a node that is not using <code class="literal">https</code>. If <code class="literal">https</code> is desired,
please ensure the following setting is in <code class="literal">elasticsearch.yml</code>:</p><pre class="programlisting prettyprint lang-yaml">shield.http.ssl: true</pre></dd></dl></div><h3><a id="_exceptions_when_unlicensed"></a>Exceptions when unlicensed</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
WARN: Failed to execute IndicesStatsAction for ClusterInfoUpdateJob
</span></dt><dd><p class="simpara">This warning occurs in the logs every 30 seconds when the Shield license is expired or invalid. It is caused by a periodic
internal request to gather disk usage information from the nodes and indices, to enable
<a class="ulink" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-allocation.html#disk" target="_top">disk-based shard allocation</a>.
Disk-based shard allocation is not required, though it is enabled by default.</p><p class="simpara">If you are using elasticsearch 1.4.3 or higher with disk-based shard allocation enabled, it will be automatically disabled when the Shield
license is expired or invalid, and will be automatically re-enabled when a valid Shield license is installed.</p><p class="simpara">If you are using elasticsearch 1.4.2 with disk-based shard allocation enabled, we recommend manually disabling disk-based shard
allocation while your Shield license is expired, and re-enabling it after installing a valid Shield license. Instructions for
disabling disk-based shard allocation are <a class="ulink" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-allocation.html#disk" target="_top">here</a>.</p></dd></dl></div></div><div class="navfooter"><span class="prev"><a href="example.html">
              « 
              Appendix 6. Full <code class="literal">esusers</code> Example</a>
           
        </span><span class="next">
           
          <a href="reference.html">Appendix 8. Reference
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="http://www.elastic.co/webinars/getting-started-with-elasticsearch/?elektra=docs">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   	
   	
   	<script type="application/ld+json">
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/logo-elastic.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#rtpcontainer').prependTo('#guide');
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + (10 + height) + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        