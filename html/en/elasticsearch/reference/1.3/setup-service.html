
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Running As a Service on Linux</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference [1.3]" /><link rel="up" href="setup.html" title="Setup" /><link rel="prev" href="setup-configuration.html" title="Configuration" /><link rel="next" href="setup-service-win.html" title="Running as a Service on Windows" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container w100">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
								<li><a class="m-contact" href="/contact"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference
      [1.3]
    </a></span> » <span class="breadcrumb-link"><a href="setup.html">Setup </a></span> » <span class="breadcrumb-node">Running As a Service on Linux</span></div><div class="navheader"><span class="prev"><a href="setup-configuration.html">
              « 
              Configuration</a>
           
        </span><span class="next">
           
          <a href="setup-service-win.html">Running as a Service on Windows
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-service"></a>Running As a Service on Linux<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="setup-configuration.html">Configuration</a></span></dt><dt><span class="chapter"><a href="setup-service.html">Running As a Service on Linux</a></span></dt><dt><span class="chapter"><a href="setup-service-win.html">Running as a Service on Windows</a></span></dt><dt><span class="chapter"><a href="setup-dir-layout.html">Directory Layout</a></span></dt><dt><span class="chapter"><a href="setup-repositories.html">Repositories</a></span></dt><dt><span class="chapter"><a href="setup-upgrade.html">Upgrading</a></span></dt></dl></div><p>In order to run elasticsearch as a service on your operating system, the provided packages try to make it as easy as possible for you to start and stop elasticsearch during reboot and upgrades.</p><h3><a id="_linux"></a>Linux<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Currently our build automatically creates a Debian package and an RPM package with <a class="link" href="setup-dir-layout.html" title="Directory Layout">these directory structures</a>, which are available on the download page. The package itself does not have any dependencies, but you have to make sure that you installed a JDK.</p><p>Each package features a configuration file, which allows you to set the following parameters:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">ES_USER</code>
</p>
</td><td valign="top">
<p>
The user to run as, defaults to <code class="literal">elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ES_GROUP</code>
</p>
</td><td valign="top">
<p>
The group to run as, defaults to <code class="literal">elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ES_HEAP_SIZE</code>
</p>
</td><td valign="top">
<p>
The heap size to start with
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ES_HEAP_NEWSIZE</code>
</p>
</td><td valign="top">
<p>
The size of the new generation heap
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ES_DIRECT_SIZE</code>
</p>
</td><td valign="top">
<p>
The maximum size of the direct memory
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">MAX_OPEN_FILES</code>
</p>
</td><td valign="top">
<p>
Maximum number of open files, defaults to <code class="literal">65535</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">MAX_LOCKED_MEMORY</code>
</p>
</td><td valign="top">
<p>
Maximum locked memory size. Set to "unlimited" if you use the bootstrap.mlockall option in elasticsearch.yml. You must also set ES_HEAP_SIZE.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">MAX_MAP_COUNT</code>
</p>
</td><td valign="top">
<p>
Maximum number of memory map areas a process may have. If you use <code class="literal">mmapfs</code> as index store type, make sure this is set to a high value. For more information, check the <a class="ulink" href="https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt" target="_top">linux kernel documentation</a> about <code class="literal">max_map_count</code>. This is set via <code class="literal">sysctl</code> before starting elasticsearch. Defaults to <code class="literal">65535</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">LOG_DIR</code>
</p>
</td><td valign="top">
<p>
Log directory, defaults to <code class="literal">/var/log/elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">DATA_DIR</code>
</p>
</td><td valign="top">
<p>
Data directory, defaults to <code class="literal">/var/lib/elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">WORK_DIR</code>
</p>
</td><td valign="top">
<p>
Work directory, defaults to <code class="literal">/tmp/elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">CONF_DIR</code>
</p>
</td><td valign="top">
<p>
Configuration file directory (which needs to include <code class="literal">elasticsearch.yml</code> and <code class="literal">logging.yml</code> files), defaults to <code class="literal">/etc/elasticsearch</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">CONF_FILE</code>
</p>
</td><td valign="top">
<p>
Path to configuration file, defaults to <code class="literal">/etc/elasticsearch/elasticsearch.yml</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ES_JAVA_OPTS</code>
</p>
</td><td valign="top">
<p>
Any additional java options you may want to apply. This may be useful, if you need to set the <code class="literal">node.name</code> property, but do not want to change the <code class="literal">elasticsearch.yml</code> configuration file, because it is distributed via a provisioning system like puppet or chef. Example: <code class="literal">ES_JAVA_OPTS="-Des.node.name=search-01"</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">RESTART_ON_UPGRADE</code>
</p>
</td><td valign="top">
<p>
Configure restart on package upgrade, defaults to <code class="literal">false</code>. This means you will have to restart your elasticsearch instance after installing a package manually. The reason for this is to ensure, that upgrades in a cluster do not result in a continuous shard reallocation resulting in high network traffic and reducing the response times of your cluster.
</p>
</td></tr></tbody></table></div><h4><a id="_debian_ubuntu"></a>Debian/Ubuntu<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The debian package ships with everything you need as it uses standard debian tools like update <code class="literal">update-rc.d</code> to define the runlevels it runs on. The init script is placed at <code class="literal">/etc/init.d/elasticsearch</code> as you would expect it. The configuration file is placed at <code class="literal">/etc/default/elasticsearch</code>.</p><p>The debian package does not start up the service by default. The reason for this is to prevent the instance to accidentally join a cluster, without being configured appropriately. After installing using <code class="literal">dpkg -i</code> you can use the following commands to ensure, that elasticsearch starts when the system is booted and then start up elasticsearch:</p><pre class="programlisting prettyprint lang-sh">sudo update-rc.d elasticsearch defaults 95 10
sudo /etc/init.d/elasticsearch start</pre><h5><a id="_installing_the_oracle_jdk"></a>Installing the Oracle JDK<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The usual recommendation is to run the Oracle JDK with elasticsearch. However, Ubuntu and Debian only ship with the OpenJDK due to license issues. You can easily run the Oracle installer package though. In case you are missing the <code class="literal">add-apt-repository</code> command under Debian GNU/Linux, make sure have at least Debian Wheezy and the package <code class="literal">python-software-properties</code> installed</p><pre class="programlisting prettyprint lang-sh">sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer
java -version</pre><p>The last command should verify a successful installation of the Oracle JDK.</p><h4><a id="_rpm_based_distributions"></a>RPM based distributions<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><h5><a id="_using_chkconfig"></a>Using chkconfig<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Some RPM based distributions are using <code class="literal">chkconfig</code> to enable and disable services. The init script is located at <code class="literal">/etc/init.d/elasticsearch</code>, where as the configuration file is placed at <code class="literal">/etc/sysconfig/elasticsearch</code>. Like the debian package the RPM package is not started by default after installation, you have to do this manually by entering the following commands</p><pre class="programlisting prettyprint lang-sh">sudo /sbin/chkconfig --add elasticsearch
sudo service elasticsearch start</pre><h5><a id="_using_systemd"></a>Using systemd<a href="https://github.com/elastic/elasticsearch/edit/1.3/docs/reference/setup/as-a-service.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Distributions like SUSE do not use the <code class="literal">chkconfig</code> tool to register services, but rather <code class="literal">systemd</code> and its command <code class="literal">/bin/systemctl</code> to start and stop services (at least in newer versions, otherwise use the <code class="literal">chkconfig</code> commands above). The configuration file is also placed at <code class="literal">/etc/sysconfig/elasticsearch</code>. After installing the RPM, you have to change the systemd configuration and then start up elasticsearch</p><pre class="programlisting prettyprint lang-sh">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service
sudo /bin/systemctl start elasticsearch.service</pre><p>Also note that changing the <code class="literal">MAX_MAP_COUNT</code> setting in <code class="literal">/etc/sysconfig/elasticsearch</code> does not have any effect, you will have to change it in <code class="literal">/usr/lib/sysctl.d/elasticsearch.conf</code> in order to have it applied at startup.</p></div><div class="navfooter"><span class="prev"><a href="setup-configuration.html">
              « 
              Configuration</a>
           
        </span><span class="next">
           
          <a href="setup-service-win.html">Running as a Service on Windows
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        