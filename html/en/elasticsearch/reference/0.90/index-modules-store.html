
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Store</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference [0.90]" /><link rel="up" href="index-modules.html" title="Index Modules" /><link rel="prev" href="index-modules-merge.html" title="Merge" /><link rel="next" href="index-modules-mapper.html" title="Mapper" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />		
	
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/loading.js"></script>
	<script src="/static/js/skel.min.js"></script>
	<script src="/static/js/skel-layers.min.js"></script>
	<script src="/static/js/classie.js"></script>	
	<script type="text/javascript">form_name = "common_layout"</script>
	<script src="/static/js/init.js"></script>
	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="/static/css/style.css" />
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 5u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<div class="header-search-form">
						   <input type="text" id="search-header" name="q" class="form-control global-input" placeholder="{elastic} search">
						</div>
					</div>
					<div class="4u 6u(small) 7u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="#"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="#">Products</a></h3>
										<ul>
											<li><a href="#">elasticsearch</a></li>
											<li><a href="#">logstash</a></li>
											<li><a href="#">kibana</a></li>
											<li><a href="#">shield</a></li>
											<li><a href="#">marvel</a></li>
											<li><a href="#">hadoop</a></li>
											<li><a href="#">support</a></li>
											<li><a href="#">downloads</a></li>
										</ul>
										<h3><a href="#">SUBSCRIPTIONS</a></h3>
										<h3><a href="#">LEARN</a></h3>
										<ul>
											<li><a href="#">guide</a></li>
											<li><a href="#">videos</a></li>
											<li><a href="#">training</a></li>
											<li><a href="#">blog</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-guide grayscale"><a href="/guide" id="header_guide">guide</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >guide</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elasticsearch.com" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="{elastic} search">
					<a class="button icon" onclick="searchForm.submit()">GO</a>
				</form>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-guide{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference
      [0.90]
    </a></span> » <span class="breadcrumb-link"><a href="index-modules.html">Index Modules </a></span> » <span class="breadcrumb-node">Store</span></div><div class="navheader"><span class="prev"><a href="index-modules-merge.html">
              « 
              Merge</a>
           
        </span><span class="next">
           
          <a href="index-modules-mapper.html">Mapper
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-store"></a>Store<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="index-modules-analysis.html">Analysis</a></span></dt><dt><span class="chapter"><a href="index-modules-allocation.html">Index Shard Allocation</a></span></dt><dt><span class="chapter"><a href="index-modules-slowlog.html">Index Slow Log</a></span></dt><dt><span class="chapter"><a href="index-modules-merge.html">Merge</a></span></dt><dt><span class="chapter"><a href="index-modules-store.html">Store</a></span></dt><dt><span class="chapter"><a href="index-modules-mapper.html">Mapper</a></span></dt><dt><span class="chapter"><a href="index-modules-translog.html">Translog</a></span></dt><dt><span class="chapter"><a href="index-modules-cache.html">Cache</a></span></dt><dt><span class="chapter"><a href="index-modules-fielddata.html">Field data</a></span></dt><dt><span class="chapter"><a href="index-modules-codec.html">Codec module</a></span></dt><dt><span class="chapter"><a href="index-modules-similarity.html">Similarity module</a></span></dt></dl></div><p>The store module allows you to control how index data is stored.</p><p>The index can either be stored in-memory (no persistence) or on-disk
(the default). In-memory indices provide better performance at the cost
of limiting the index size to the amount of available physical memory.</p><p>When using a local gateway (the default), file system storage with <span class="strong"><strong>no</strong></span>
in memory storage is required to maintain index consistency. This is
required since the local gateway constructs its state from the local
index state of each node.</p><p>Another important aspect of memory based storage is the fact that
ElasticSearch supports storing the index in memory <span class="strong"><strong>outside of the JVM
heap space</strong></span> using the "Memory" (see below) storage type. It translates
to the fact that there is no need for extra large JVM heaps (with their
own consequences) for storing the index in memory.</p><h3><a id="_store_level_compression"></a>Store Level Compression<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p><span class="strong"><strong>From version 0.90 onwards, store compression is always enabled.</strong></span></p><p>For versions 0.19.5 to 0.20:</p><p>In the mapping, one can configure the <code class="literal">_source</code> field to be compressed.
The problem with it is the fact that small documents don’t end up
compressing well, as several documents compressed in a single
compression "block" will provide a considerable better compression
ratio. This version introduces the ability to compress stored fields
using the <code class="literal">index.store.compress.stored</code> setting, as well as term vector
using the <code class="literal">index.store.compress.tv</code> setting.</p><p>The settings can be set on the index level, and are dynamic, allowing to
change them using the index update settings API. elasticsearch can
handle mixed stored / non stored cases. This allows, for example, to
enable compression at a later stage in the index lifecycle, and optimize
the index to make use of it (generating new segments that use
compression).</p><p>Best compression, compared to _source level compression, will mainly
happen when indexing smaller documents (less than 64k). The price on the
other hand is the fact that for each doc returned, a block will need to
be decompressed (its fast though) in order to extract the document data.</p><h3><a id="store-throttling"></a>Store Level Throttling<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>(0.19.5 and above).</p><p>The way Lucene, the IR library elasticsearch uses under the covers,
works is by creating immutable segments (up to deletes) and constantly
merging them (the merge policy settings allow to control how those
merges happen). The merge process happens in an asynchronous manner
without affecting the indexing / search speed. The problem though,
especially on systems with low IO, is that the merge process can be
expensive and affect search / index operation simply by the fact that
the box is now taxed with more IO happening.</p><p>The store module allows to have throttling configured for merges (or
all) either on the node level, or on the index level. The node level
throttling will make sure that out of all the shards allocated on that
node, the merge process won’t pass the specific setting bytes per
second. It can be set by setting <code class="literal">indices.store.throttle.type</code> to
<code class="literal">merge</code>, and setting <code class="literal">indices.store.throttle.max_bytes_per_sec</code> to
something like <code class="literal">5mb</code>. The node level settings can be changed dynamically
using the cluster update settings API. Since 0.90.1 the default is set
to <code class="literal">20mb</code> with type <code class="literal">merge</code>.</p><p>If specific index level configuration is needed, regardless of the node
level settings, it can be set as well using the
<code class="literal">index.store.throttle.type</code>, and
<code class="literal">index.store.throttle.max_bytes_per_sec</code>. The default value for the type
is <code class="literal">node</code>, meaning it will throttle based on the node level settings and
participate in the global throttling happening. Both settings can be set
using the index update settings API dynamically.</p><p>The following sections lists all the different storage types supported.</p><h3><a id="file-system"></a>File System<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>File system based storage is the default storage used. There are
different implementations or storage types. The best one for the
operating environment will be automatically chosen: <code class="literal">mmapfs</code> on
Solaris/Windows 64bit, <code class="literal">simplefs</code> on Windows 32bit, and <code class="literal">niofs</code> for the
rest.</p><p>The following are the different file system based storage types:</p><h4><a id="_simple_fs"></a>Simple FS<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">simplefs</code> type is a straightforward implementation of file system
storage (maps to Lucene <code class="literal">SimpleFsDirectory</code>) using a random access file.
This implementation has poor concurrent performance (multiple threads
will bottleneck). It is usually better to use the <code class="literal">niofs</code> when you need
index persistence.</p><h4><a id="_nio_fs"></a>NIO FS<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">niofs</code> type stores the shard index on the file system (maps to
Lucene <code class="literal">NIOFSDirectory</code>) using NIO. It allows multiple threads to read
from the same file concurrently. It is not recommended on Windows
because of a bug in the SUN Java implementation.</p><h4><a id="_mmap_fs"></a>MMap FS<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">mmapfs</code> type stores the shard index on the file system (maps to
Lucene <code class="literal">MMapDirectory</code>) by mapping a file into memory (mmap). Memory
mapping uses up a portion of the virtual memory address space in your
process equal to the size of the file being mapped. Before using this
class, be sure your have plenty of virtual address space.</p><h3><a id="store-memory"></a>Memory<a href="https://github.com/elasticsearch/elasticsearch/edit/0.90/docs/reference/index-modules/store.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The <code class="literal">memory</code> type stores the index in main memory with the following
configuration options:</p><p>There are also <span class="strong"><strong>node</strong></span> level settings that control the caching of buffers
(important when using direct buffers):</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Setting </th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">cache.memory.direct</code></p></td><td align="left" valign="top"><p>Should the memory be allocated outside of the
JVM heap. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">cache.memory.small_buffer_size</code></p></td><td align="left" valign="top"><p>The small buffer size, defaults to
<code class="literal">1kb</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">cache.memory.large_buffer_size</code></p></td><td align="left" valign="top"><p>The large buffer size, defaults to
<code class="literal">1mb</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">cache.memory.small_cache_size</code></p></td><td align="left" valign="top"><p>The small buffer cache size, defaults
to <code class="literal">10mb</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">cache.memory.large_cache_size</code></p></td><td align="left" valign="top"><p>The large buffer cache size, defaults
to <code class="literal">500mb</code>.</p></td></tr></tbody></table></div></div><div class="navfooter"><span class="prev"><a href="index-modules-merge.html">
              « 
              Merge</a>
           
        </span><span class="next">
           
          <a href="index-modules-mapper.html">Mapper
               »
            </a></span></div>
<!-- end body -->

            </section>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
						<p>&copy; 2015. All Rights Reserved - Elasticsearch</p>
						<ul class="links">
							<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
							
							<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
							
							<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
							
							<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
							
						</ul>
					</div>
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elastic.co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elasticsearch" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<div class="preloader">
    	<div class="status"></div>
	</div>
  	<style></style>
   	<link type="text/css" rel="stylesheet" href="/static/css/flexslider.css" >

<script src="/static/js/jquery.flexslider.min.js"></script>
<script src="/static/js/jquery.dropdown.min.js"></script>
<script src="/static/js/script.js"></script>
   	
</body>