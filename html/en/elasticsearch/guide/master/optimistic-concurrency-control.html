
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Optimistic Concurrency Control</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="data-in-data-out.html" title="Data In, Data Out" /><link rel="prev" href="version-control.html" title="Dealing with Conflicts" /><link rel="next" href="partial-updates.html" title="Partial Updates to Documents" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/guide_template.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container w100">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
								<li><a class="m-contact" href="/contact"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="https://purchases.elastic.co" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started </a></span> » <span class="breadcrumb-link"><a href="data-in-data-out.html">Data In, Data Out</a></span> » <span class="breadcrumb-node">Optimistic Concurrency Control</span></div><div class="navheader"><span class="prev"><a href="version-control.html">
              « 
              Dealing with Conflicts</a>
           
        </span><span class="next">
           
          <a href="partial-updates.html">Partial Updates to Documents
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="optimistic-concurrency-control"></a>Optimistic Concurrency Control<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/030_Data/40_Version_control.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="document.html">What Is a Document?</a></span></dt><dt><span class="section"><a href="_document_metadata.html">Document Metadata</a></span></dt><dt><span class="section"><a href="index-doc.html">Indexing a Document</a></span></dt><dt><span class="section"><a href="get-doc.html">Retrieving a Document</a></span></dt><dt><span class="section"><a href="doc-exists.html">Checking Whether a Document Exists</a></span></dt><dt><span class="section"><a href="update-doc.html">Updating a Whole Document</a></span></dt><dt><span class="section"><a href="create-doc.html">Creating a New Document</a></span></dt><dt><span class="section"><a href="delete-doc.html">Deleting a Document</a></span></dt><dt><span class="section"><a href="version-control.html">Dealing with Conflicts</a></span></dt><dt><span class="section"><a href="optimistic-concurrency-control.html">Optimistic Concurrency Control</a></span></dt><dt><span class="section"><a href="partial-updates.html">Partial Updates to Documents</a></span></dt><dt><span class="section"><a href="_retrieving_multiple_documents.html">Retrieving Multiple Documents</a></span></dt><dt><span class="section"><a href="bulk.html">Cheaper in Bulk</a></span></dt></dl></div><p>Elasticsearch is distributed.  When documents<a id="id-1.4.5.21.2.1" class="indexterm"></a>
<a id="id-1.4.5.21.2.2" class="indexterm"></a> are created, updated, or deleted,
the new version of the document has to be replicated to other nodes in the
cluster.  Elasticsearch is also asynchronous and  concurrent, meaning that
these replication requests are sent in parallel, and may arrive at their
destination <span class="emphasis"><em>out of sequence</em></span>. Elasticsearch needs a way of ensuring that an older
version of a document never overwrites a newer version.</p><p>When we discussed <code class="literal">index</code>, <code class="literal">get</code>, and <code class="literal">delete</code> requests previously, we pointed out
that every document has a <code class="literal">_version</code> number that is incremented whenever a
document is changed. Elasticsearch uses this <code class="literal">_version</code> number to ensure that
changes are applied in the correct order. If an older version of a document
arrives after a new version, it can simply be ignored.</p><p>We can take advantage of the <code class="literal">_version</code> number to ensure <a id="id-1.4.5.21.4.2" class="indexterm"></a>
<a id="id-1.4.5.21.4.3" class="indexterm"></a>that conflicting
changes made by our application do not result in data loss. We do this by
specifying the <code class="literal">version</code> number of the document that we wish to change.  If that
version is no longer current, our request fails.</p><p>Let’s create a new blog post:</p><pre class="programlisting prettyprint lang-js">PUT /website/blog/1/_create
{
  "title": "My first blog entry",
  "text":  "Just trying this out..."
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_Concurrency.json" target="sense">View in Sense</a><p>The response body tells us that this newly created document has <code class="literal">_version</code>
number <code class="literal">1</code>.  Now imagine that we want to edit the document: we load its data
into a web form, make our changes, and then save the new version.</p><p>First we retrieve the document:</p><pre class="programlisting prettyprint lang-js">GET /website/blog/1</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_Concurrency.json" target="sense">View in Sense</a><p>The response body includes the same <code class="literal">_version</code> number of <code class="literal">1</code>:</p><pre class="programlisting prettyprint lang-js">{
  "_index" :   "website",
  "_type" :    "blog",
  "_id" :      "1",
  "_version" : 1,
  "found" :    true,
  "_source" :  {
      "title": "My first blog entry",
      "text":  "Just trying this out..."
  }
}</pre><p>Now, when we try to save our changes by reindexing the document, we specify
the <code class="literal">version</code> to which our changes should be applied:</p><pre class="programlisting prettyprint lang-js">PUT /website/blog/1?version=1 <a id="CO9-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "title": "My first blog entry",
  "text":  "Starting to get the hang of this..."
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_Concurrency.json" target="sense">View in Sense</a><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO9-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
We want this update to succeed only if the current <code class="literal">_version</code> of this
    document in our index is version <code class="literal">1</code>.
</p></td></tr></table></div><p>This request succeeds, and the response body tells us that the <code class="literal">_version</code>
has been incremented to <code class="literal">2</code>:</p><pre class="programlisting prettyprint lang-js">{
  "_index":   "website",
  "_type":    "blog",
  "_id":      "1",
  "_version": 2
  "created":  false
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_Concurrency.json" target="sense">View in Sense</a><p>However, if we were to rerun the same index request, still specifying
<code class="literal">version=1</code>, Elasticsearch would respond with a <code class="literal">409 Conflict</code> HTTP response
code, and a body like the following:</p><pre class="programlisting prettyprint lang-js">{
  "error" : "VersionConflictEngineException[[website][2] [blog][1]:
             version conflict, current [2], provided [1]]",
  "status" : 409
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_Concurrency.json" target="sense">View in Sense</a><p>This tells us that the current <code class="literal">_version</code> number of the document in
Elasticsearch is <code class="literal">2</code>, but that we specified that we were updating version <code class="literal">1</code>.</p><p>What we do now depends on our application requirements.  We could tell the
user that somebody else has already made changes to the document, and to review the changes before trying to save them again.
Alternatively, as in the case of the widget <code class="literal">stock_count</code> previously, we could
retrieve the latest document and try to reapply the change.</p><p>All APIs that update or delete a document accept a <code class="literal">version</code> parameter, which
allows you to apply optimistic concurrency control to just the parts of your
code where it makes sense.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_using_versions_from_an_external_system"></a>Using Versions from an External System<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/030_Data/40_Version_control.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A common setup is to use some other database as the primary data store and
Elasticsearch to make the data searchable,<a id="id-1.4.5.21.27.2.1" class="indexterm"></a>
<a id="id-1.4.5.21.27.2.2" class="indexterm"></a><a id="id-1.4.5.21.27.2.3" class="indexterm"></a> which means that all changes to the
primary database need to be copied across to Elasticsearch as they happen.  If
multiple processes are responsible for this data synchronization, you may
run into concurrency problems similar to those described previously.</p><p>If your main database already has version numbers—or a value such as
<code class="literal">timestamp</code> that can be used as a version number—then  you can reuse these
same version numbers in Elasticsearch by adding <code class="literal">version_type=external</code> to the
query string.<a id="id-1.4.5.21.27.3.3" class="indexterm"></a>
<a id="id-1.4.5.21.27.3.4" class="indexterm"></a> Version numbers must be integers greater than zero and less than
about <code class="literal">9.2e+18</code>--a positive <code class="literal">long</code> value in Java.</p><p>The way external version numbers are handled is a bit different from the
internal version numbers  we discussed previously.  Instead of checking that the
current <code class="literal">_version</code> is <span class="emphasis"><em>the same</em></span> as the one specified in the request,
Elasticsearch checks that the current <code class="literal">_version</code> is <span class="emphasis"><em>less than</em></span> the specified
version. If the request succeeds, the external version number is stored as the
document’s new <code class="literal">_version</code>.</p><p>External version numbers can be specified not only on
index and delete requests, but also when <span class="emphasis"><em>creating</em></span> new documents.</p><p>For instance, to create a new blog post with an external version number
of <code class="literal">5</code>, we can do the following:</p><pre class="programlisting prettyprint lang-js">PUT /website/blog/2?version=5&amp;version_type=external
{
  "title": "My first external blog entry",
  "text":  "Starting to get the hang of this..."
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_External_versions.json" target="sense">View in Sense</a><p>In the response, we can see that the current <code class="literal">_version</code> number is <code class="literal">5</code>:</p><pre class="programlisting prettyprint lang-js">{
  "_index":   "website",
  "_type":    "blog",
  "_id":      "2",
  "_version": 5,
  "created":  true
}</pre><p>Now we update this document, specifying a new <code class="literal">version</code> number of <code class="literal">10</code>:</p><pre class="programlisting prettyprint lang-js">PUT /website/blog/2?version=10&amp;version_type=external
{
  "title": "My first external blog entry",
  "text":  "This is a piece of cake..."
}</pre><a class="sense_widget" href="sense_widget.html?snippets/030_Data/40_External_versions.json" target="sense">View in Sense</a><p>The request succeeds and sets the current <code class="literal">_version</code> to <code class="literal">10</code>:</p><pre class="programlisting prettyprint lang-js">{
  "_index":   "website",
  "_type":    "blog",
  "_id":      "2",
  "_version": 10,
  "created":  false
}</pre><p>If you were to rerun this request, it would fail with the same conflict error
we saw before, because the specified external version number is not higher
than the current version in Elasticsearch.</p></div></div><div class="navfooter"><span class="prev"><a href="version-control.html">
              « 
              Dealing with Conflicts</a>
           
        </span><span class="next">
           
          <a href="partial-updates.html">Partial Updates to Documents
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   	
   	
   	<script type="application/ld+json">
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/logo-elastic.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + (10 + height) + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        