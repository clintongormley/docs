
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>wildcard and regexp Queries</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="partial-matching.html" title="Partial Matching" /><link rel="prev" href="prefix-query.html" title="prefix Query" /><link rel="next" href="_query_time_search_as_you_type.html" title="Query-Time Search-as-You-Type" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth </a></span> » <span class="breadcrumb-link"><a href="partial-matching.html">Partial Matching</a></span> » <span class="breadcrumb-node">wildcard and regexp Queries</span></div><div class="navheader"><span class="prev"><a href="prefix-query.html">
              « 
              prefix Query</a>
           
        </span><span class="next">
           
          <a href="_query_time_search_as_you_type.html">Query-Time Search-as-You-Type
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_wildcard_and_regexp_queries"></a>wildcard and regexp Queries<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/130_Partial_Matching/15_WildcardRegexp.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="_postcodes_and_structured_data.html">Postcodes and Structured Data</a></span></dt><dt><span class="section"><a href="prefix-query.html">prefix Query</a></span></dt><dt><span class="section"><a href="_wildcard_and_regexp_queries.html">wildcard and regexp Queries</a></span></dt><dt><span class="section"><a href="_query_time_search_as_you_type.html">Query-Time Search-as-You-Type</a></span></dt><dt><span class="section"><a href="_index_time_optimizations.html">Index-Time Optimizations</a></span></dt><dt><span class="section"><a href="_ngrams_for_partial_matching.html">Ngrams for Partial Matching</a></span></dt><dt><span class="section"><a href="_index_time_search_as_you_type.html">Index-Time Search-as-You-Type</a></span></dt><dt><span class="section"><a href="ngrams-compound-words.html">Ngrams for Compound Words</a></span></dt></dl></div><p>The <code class="literal">wildcard</code> query is a low-level, term-based query <a id="id-1.5.7.13.2.2" class="indexterm"></a><a id="id-1.5.7.13.2.3" class="indexterm"></a>
<a id="id-1.5.7.13.2.4" class="indexterm"></a>similar in nature to the
<code class="literal">prefix</code> query, but it allows you to specify a pattern instead of just a prefix.
It uses the standard shell wildcards: <code class="literal">?</code> matches any character, and <code class="literal">*</code>
matches zero or more characters.<a id="id-1.5.7.13.2.8" class="indexterm"></a>
<a id="id-1.5.7.13.2.9" class="indexterm"></a></p><p>This query would match the documents containing <code class="literal">W1F 7HW</code> and <code class="literal">W2F 8HW</code>:</p><pre class="programlisting prettyprint lang-js">GET /my_index/address/_search
{
    "query": {
        "wildcard": {
            "postcode": "W?F*HW" <a id="CO91-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        }
    }
}</pre><a class="sense_widget" href="sense_widget.html?snippets/130_Partial_Matching/15_Wildcard_regexp.json" target="sense">View in Sense</a><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO91-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">?</code> matches the <code class="literal">1</code> and the <code class="literal">2</code>, while the <code class="literal">*</code> matches the space
    and the <code class="literal">7</code> and <code class="literal">8</code>.
</p></td></tr></table></div><p>Imagine now that you want to match all postcodes just in the <code class="literal">W</code> area.  A
prefix match would also include postcodes starting with <code class="literal">WC</code>, and you would
have a similar problem with a wildcard match.  We want to match only postcodes
that begin with a <code class="literal">W</code>, followed by a number.<a id="id-1.5.7.13.7.4" class="indexterm"></a>
<a id="id-1.5.7.13.7.5" class="indexterm"></a><a id="id-1.5.7.13.7.6" class="indexterm"></a>  The <code class="literal">regexp</code> query allows you to
write these more complicated patterns:</p><pre class="programlisting prettyprint lang-js">GET /my_index/address/_search
{
    "query": {
        "regexp": {
            "postcode": "W[0-9].+" <a id="CO92-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        }
    }
}</pre><a class="sense_widget" href="sense_widget.html?snippets/130_Partial_Matching/15_Wildcard_regexp.json" target="sense">View in Sense</a><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO92-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The regular expression says that the term must begin with a <code class="literal">W</code>, followed
    by any number from 0 to 9, followed by one or more other characters.
</p></td></tr></table></div><p>The <code class="literal">wildcard</code> and <code class="literal">regexp</code> queries work in exactly the same way as the
<code class="literal">prefix</code> query.  They also have to scan the list of terms in the inverted
index to find all matching terms, and gather document IDs term by term.  The
only difference between them and the <code class="literal">prefix</code> query is that they support more-complex patterns.</p><p>This means that the same caveats apply.  Running these queries on a field with
many unique terms can be resource intensive indeed.  Avoid using a
pattern that starts with a wildcard (for example, <code class="literal">*foo</code> or, as a regexp, <code class="literal">.*foo</code>).</p><p>Whereas prefix matching can be made more efficient by preparing your data at
index time, wildcard and regular expression matching can be done only
at query time. These queries have their place but should be used sparingly.</p><div class="caution admon"><div class="icon"><img alt="Caution" src="images/icons/caution.png" /></div><div class="admon_content"><p>The <code class="literal">prefix</code>, <code class="literal">wildcard</code>, and <code class="literal">regexp</code> queries operate on terms. If you use
them to query an <code class="literal">analyzed</code> field, they will examine each term in the
field, not the field as a whole.<a id="id-1.5.7.13.14.1.5" class="indexterm"></a>
<a id="id-1.5.7.13.14.1.6" class="indexterm"></a><a id="id-1.5.7.13.14.1.7" class="indexterm"></a>
<a id="id-1.5.7.13.14.1.8" class="indexterm"></a><a id="id-1.5.7.13.14.1.9" class="indexterm"></a>
<a id="id-1.5.7.13.14.1.10" class="indexterm"></a><a id="id-1.5.7.13.14.1.11" class="indexterm"></a>
<a id="id-1.5.7.13.14.1.12" class="indexterm"></a></p><p>For instance, let’s say that our <code class="literal">title</code> field contains “Quick brown fox”
which produces the terms <code class="literal">quick</code>, <code class="literal">brown</code>, and <code class="literal">fox</code>.</p><p>This query would match:</p><pre class="programlisting prettyprint lang-json">{ "regexp": { "title": "br.*" }}</pre><p>But neither of these queries would match:</p><pre class="programlisting prettyprint lang-json">{ "regexp": { "title": "Qu.*" }} <a id="CO93-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{ "regexp": { "title": "quick br*" }} <a id="CO93-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO93-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The term in the index is <code class="literal">quick</code>, not <code class="literal">Quick</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO93-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">quick</code> and <code class="literal">brown</code> are separate terms.
</p></td></tr></table></div></div></div></div><div class="navfooter"><span class="prev"><a href="prefix-query.html">
              « 
              prefix Query</a>
           
        </span><span class="next">
           
          <a href="_query_time_search_as_you_type.html">Query-Time Search-as-You-Type
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        