
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Expand or contract</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="synonyms.html" title="Synonyms" /><link rel="prev" href="synonym-formats.html" title="Formatting Synonyms" /><link rel="next" href="synonyms-analysis-chain.html" title="Synonyms and The Analysis Chain" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language </a></span> » <span class="breadcrumb-link"><a href="synonyms.html">Synonyms</a></span> » <span class="breadcrumb-node">Expand or contract</span></div><div class="navheader"><span class="prev"><a href="synonym-formats.html">
              « 
              Formatting Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonyms-analysis-chain.html">Synonyms and The Analysis Chain
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="synonyms-expand-or-contract"></a>Expand or contract<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/260_Synonyms/40_Expand_contract.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="using-synonyms.html">Using Synonyms</a></span></dt><dt><span class="section"><a href="synonym-formats.html">Formatting Synonyms</a></span></dt><dt><span class="section"><a href="synonyms-expand-or-contract.html">Expand or contract</a></span></dt><dt><span class="section"><a href="synonyms-analysis-chain.html">Synonyms and The Analysis Chain</a></span></dt><dt><span class="section"><a href="multi-word-synonyms.html">Multiword Synonyms and Phrase Queries</a></span></dt><dt><span class="section"><a href="symbol-synonyms.html">Symbol Synonyms</a></span></dt></dl></div><p>In <a class="xref" href="synonym-formats.html" title="Formatting Synonyms">Formatting Synonyms</a>, we have seen that it is<a id="id-1.6.8.11.2.2" class="indexterm"></a>
<a id="id-1.6.8.11.2.3" class="indexterm"></a> possible to replace synonyms by
<span class="emphasis"><em>simple expansion</em></span>, <span class="emphasis"><em>simple contraction</em></span>, or <span class="emphasis"><em>generic expansion</em></span>.  We will look
at the trade-offs of each of these techniques in this section.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>This section deals with single-word synonyms only.  Multiword
synonyms add another layer of complexity and are discussed later in
<a class="xref" href="multi-word-synonyms.html" title="Multiword Synonyms and Phrase Queries">Multiword Synonyms and Phrase Queries</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="synonyms-expansion"></a>Simple Expansion<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/260_Synonyms/40_Expand_contract.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>With <span class="emphasis"><em>simple expansion</em></span>,<a id="id-1.6.8.11.4.2.2" class="indexterm"></a>
<a id="id-1.6.8.11.4.2.3" class="indexterm"></a>
<a id="id-1.6.8.11.4.2.4" class="indexterm"></a><a id="id-1.6.8.11.4.2.5" class="indexterm"></a> any of the listed synonyms is expanded into <span class="emphasis"><em>all</em></span> of
the listed synonyms:</p><pre class="literallayout">"jump,hop,leap"</pre><p>Expansion can be applied either at index time or at query time.  Each has advantages
(⬆)︎ and disadvantages (⬇)︎. When to use which comes down to performance versus
flexibility.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">                   </th><th align="left" valign="top"> Index time             </th><th align="left" valign="top"> Query time</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>Index size</strong></span></p></td><td align="left" valign="top"><p>⬇︎ Bigger index because all synonyms must be indexed.</p></td><td align="left" valign="top"><p>⬆︎ Normal.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Relevance</strong></span></p></td><td align="left" valign="top"><p>⬇︎ All synonyms will have the same IDF (see <a class="xref" href="relevance-intro.html" title="What Is Relevance?">What Is Relevance?</a>), meaning
      that more commonly used words will have the same weight as less commonly
      used words.</p></td><td align="left" valign="top"><p>⬆︎ The IDF for each synonym will be correct.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Performance</strong></span></p></td><td align="left" valign="top"><p>⬆︎ A query needs to find only the single term specified in the query string.</p></td><td align="left" valign="top"><p>⬇︎ A query for a single term is rewritten to look up all synonyms, which
      decreases performance.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>Flexibility</strong></span></p></td><td align="left" valign="top"><p>⬇︎ The synonym rules can’t be changed for existing documents. For the new rules
      to have effect, existing documents have to be reindexed.</p></td><td align="left" valign="top"><p>⬆︎ Synonym rules can be updated without reindexing documents.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="synonyms-contraction"></a>Simple Contraction<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/260_Synonyms/40_Expand_contract.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><span class="emphasis"><em>Simple contraction</em></span> maps a group of <a id="id-1.6.8.11.5.2.2" class="indexterm"></a>
<a id="id-1.6.8.11.5.2.3" class="indexterm"></a>
<a id="id-1.6.8.11.5.2.4" class="indexterm"></a><a id="id-1.6.8.11.5.2.5" class="indexterm"></a>synonyms on the left side to a single
value on the right side:</p><pre class="literallayout">"leap,hop =&gt; jump"</pre><p>It must be applied both at index time and at query time, to ensure that query
terms are mapped to the same single value that exists in the index.</p><p>This approach has some advantages and some disadvantages compared to the simple expansion approach:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Index size
</span></dt><dd>
⬆︎ The index size is normal, as only a single term is indexed.
</dd><dt><span class="term">
Relevance
</span></dt><dd>
⬇︎ The IDF for all terms is the same, so you can’t distinguish between more
commonly used words and less commonly used words.
</dd><dt><span class="term">
Performance
</span></dt><dd>
⬆︎ A query needs to find only the single term that appears in the index.
</dd><dt><span class="term">
Flexibility
</span></dt><dd><p class="simpara">⬆︎ New synonyms can be added to the left side of the rule and applied at
query time. For instance, imagine that we wanted to add the word <code class="literal">bound</code> to
the rule specified previously. The following rule would work for queries that
contain <code class="literal">bound</code> or for newly added documents that contain <code class="literal">bound</code>:</p><pre class="literallayout">"leap,hop,bound =&gt; jump"</pre><p class="simpara">But we could expand the effect to also take into account <span class="emphasis"><em>existing</em></span> documents
that contain <code class="literal">bound</code> by writing the rule as follows:</p><pre class="literallayout">"leap,hop,bound =&gt; jump,bound"</pre><p class="simpara">When you reindex your documents, you could revert to the previous rule to gain
the performance benefit of querying only a single term.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="synonyms-genres"></a>Genre Expansion<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/260_Synonyms/40_Expand_contract.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Genre expansion is quite different from simple<a id="id-1.6.8.11.6.2.1" class="indexterm"></a>
<a id="id-1.6.8.11.6.2.2" class="indexterm"></a>
<a id="id-1.6.8.11.6.2.3" class="indexterm"></a><a id="id-1.6.8.11.6.2.4" class="indexterm"></a> contraction or expansion.
Instead of treating all synonyms as equal, genre expansion widens the meaning
of a term to be more generic. Take these rules, for example:</p><pre class="literallayout">"cat    =&gt; cat,pet",
"kitten =&gt; kitten,cat,pet",
"dog    =&gt; dog,pet"
"puppy  =&gt; puppy,dog,pet"</pre><p>By applying genre expansion at index time:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A query for <code class="literal">kitten</code> would find just documents about kittens.
</li><li class="listitem">
A query for <code class="literal">cat</code> would find documents abouts kittens and cats.
</li><li class="listitem">
A query for <code class="literal">pet</code> would find documents about kittens, cats, puppies, dogs,
  or pets.
</li></ul></div><p>Alternatively, by applying genre expansion at query time, a query for <code class="literal">kitten</code>
would be expanded to return documents that mention kittens, cats, or pets
specifically.</p><p>You could also have the best of both worlds by applying expansion at index
time to ensure that the genres are present in the index. Then, at query time,
you can choose to not apply synonyms (so that a query for <code class="literal">kitten</code>
returns only documents about kittens) or to apply synonyms in order to match
kittens, cats and pets (including the canine variety).</p><p>With the preceding example rules above, the IDF for <code class="literal">kitten</code> will be correct, while the
IDF for <code class="literal">cat</code> and <code class="literal">pet</code> will be artificially deflated.  However, this
works in your favor—a genre-expanded query for <code class="literal">kitten OR cat OR pet</code> will
rank documents with <code class="literal">kitten</code> highest, followed by documents with <code class="literal">cat</code>, and
documents with <code class="literal">pet</code> would be right at the bottom.</p></div></div><div class="navfooter"><span class="prev"><a href="synonym-formats.html">
              « 
              Formatting Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonyms-analysis-chain.html">Synonyms and The Analysis Chain
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        