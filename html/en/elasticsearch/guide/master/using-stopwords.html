
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Stopwords</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="stopwords.html" title="Stopwords: Performance Versus Precision" /><link rel="prev" href="pros-cons-stopwords.html" title="Pros and Cons of Stopwords" /><link rel="next" href="stopwords-performance.html" title="Stopwords and Performance" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container w100">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
								<li><a class="m-contact" href="/contact"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="https://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language </a></span> » <span class="breadcrumb-link"><a href="stopwords.html">Stopwords: Performance Versus Precision</a></span> » <span class="breadcrumb-node">Using Stopwords</span></div><div class="navheader"><span class="prev"><a href="pros-cons-stopwords.html">
              « 
              Pros and Cons of Stopwords</a>
           
        </span><span class="next">
           
          <a href="stopwords-performance.html">Stopwords and Performance
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-stopwords"></a>Using Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="pros-cons-stopwords.html">Pros and Cons of Stopwords</a></span></dt><dt><span class="section"><a href="using-stopwords.html">Using Stopwords</a></span></dt><dt><span class="section"><a href="stopwords-performance.html">Stopwords and Performance</a></span></dt><dt><span class="section"><a href="common-terms.html">Divide and Conquer</a></span></dt><dt><span class="section"><a href="stopwords-phrases.html">Stopwords and Phrase Queries</a></span></dt><dt><span class="section"><a href="common-grams.html">common_grams Token Filter</a></span></dt><dt><span class="section"><a href="stopwords-relavance.html">Stopwords and Relevance</a></span></dt></dl></div><p>The removal of stopwords is <a id="id-1.6.7.12.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.2.2" class="indexterm"></a>handled by the
<a class="ulink" href="http://bit.ly/1INX4tN" target="_top"><code class="literal">stop</code> token filter</a> which can be used
when <a id="id-1.6.7.12.2.4" class="indexterm"></a>creating a <code class="literal">custom</code> analyzer (see <a class="xref" href="using-stopwords.html#stop-token-filter" title="Using the stop Token Filter">Using the stop Token Filter</a>).
However, some out-of-the-box analyzers<a id="id-1.6.7.12.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.2.8" class="indexterm"></a><a id="id-1.6.7.12.2.9" class="indexterm"></a>
<a id="id-1.6.7.12.2.10" class="indexterm"></a><a id="id-1.6.7.12.2.11" class="indexterm"></a>
<a id="id-1.6.7.12.2.12" class="indexterm"></a><a id="id-1.6.7.12.2.13" class="indexterm"></a>
<a id="id-1.6.7.12.2.14" class="indexterm"></a> come with the <code class="literal">stop</code> filter pre-integrated:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="ulink" href="http://bit.ly/1xtdoJV" target="_top">Language analyzers</a>
</span></dt><dd>
    Each language analyzer defaults to using the appropriate stopwords list
    for that language. For instance, the <code class="literal">english</code> analyzer uses the
    <code class="literal">_english_</code> stopwords list.
</dd><dt><span class="term">
<a class="ulink" href="http://bit.ly/14EpXv3" target="_top"><code class="literal">standard</code> analyzer</a>
</span></dt><dd>
    Defaults to the empty stopwords list: <code class="literal">_none_</code>, essentially disabling
    stopwords.
</dd><dt><span class="term">
<a class="ulink" href="http://bit.ly/1u9OVct" target="_top"><code class="literal">pattern</code> analyzer</a>
</span></dt><dd>
    Defaults to <code class="literal">_none_</code>, like the <code class="literal">standard</code> analyzer.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stopwords_and_the_standard_analyzer"></a>Stopwords and the Standard Analyzer<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To use custom stopwords in conjunction with <a id="id-1.6.7.12.4.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.2" class="indexterm"></a><a id="id-1.6.7.12.4.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.4" class="indexterm"></a>the <code class="literal">standard</code> analyzer, all we
need to do is to create a configured version of the analyzer and pass in the
list of <code class="literal">stopwords</code> that we require:</p><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": { <a id="CO167-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type": "standard", <a id="CO167-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "stopwords": [ "and", "the" ] <a id="CO167-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This is a custom analyzer called <code class="literal">my_analyzer</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This analyzer is the <code class="literal">standard</code> analyzer with some custom configuration.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The stopwords to filter out are <code class="literal">and</code> and <code class="literal">the</code>.
</p></td></tr></table></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>This same technique can be used to configure custom stopword lists for
any of the language analyzers.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="maintaining-positions"></a>Maintaining Positions<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The output from the <code class="literal">analyze</code> API<a id="id-1.6.7.12.5.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.2.3" class="indexterm"></a> is quite interesting:</p><pre class="programlisting prettyprint lang-json">GET /my_index/_analyze?analyzer=my_analyzer
The quick and the dead</pre><pre class="programlisting prettyprint lang-json">{
   "tokens": [
      {
         "token":        "quick",
         "start_offset": 4,
         "end_offset":   9,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     2 <a id="CO168-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      },
      {
         "token":        "dead",
         "start_offset": 18,
         "end_offset":   22,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     5 <a id="CO168-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      }
   ]
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO168-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO168-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Note the <code class="literal">position</code> of each token.
</p></td></tr></table></div><p>The stopwords have been filtered out, as expected, but the interesting part is
that the <code class="literal">position</code> of the<a id="id-1.6.7.12.5.6.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.3" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.4" class="indexterm"></a> two remaining terms is unchanged: <code class="literal">quick</code> is the
second word in the original sentence, and <code class="literal">dead</code> is the fifth. This is
important for phrase queries—if the positions of each term had been
adjusted, a phrase query for <code class="literal">quick dead</code> would have matched the preceding
example incorrectly.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="specifying-stopwords"></a>Specifying Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Stopwords can be passed inline, as we did in <a id="id-1.6.7.12.6.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.2.2" class="indexterm"></a>the previous example, by
specifying an array:</p><pre class="programlisting prettyprint lang-json">"stopwords": [ "and", "the" ]</pre><p>The default stopword list for a particular language can be specified using the
<code class="literal">_lang_</code> notation:</p><pre class="programlisting prettyprint lang-json">"stopwords": "_english_"</pre><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The predefined language-specific stopword<a id="id-1.6.7.12.6.6.1.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.6.1.2" class="indexterm"></a> lists available in
Elasticsearch can be found in the
<a class="ulink" href="http://bit.ly/157YLFy" target="_top"><code class="literal">stop</code> token filter</a> documentation.</p></div></div><p>Stopwords can be disabled by <a id="id-1.6.7.12.6.7.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.2" class="indexterm"></a>specifying the special list: <code class="literal">_none_</code>.  For
instance, to use the <code class="literal">english</code> analyzer<a id="id-1.6.7.12.6.7.5" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.6" class="indexterm"></a> without stopwords, you can do the
following:</p><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":      "english", <a id="CO169-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "stopwords": "_none_" <a id="CO169-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">my_english</code> analyzer is based on the <code class="literal">english</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
But stopwords are disabled.
</p></td></tr></table></div><p>Finally, stopwords can also be listed in a file with one word per line.  The
file must be present on all nodes in the cluster, and the path can be
specified<a id="id-1.6.7.12.6.10.1" class="indexterm"></a> with the <code class="literal">stopwords_path</code> parameter:</p><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":           "english",
          "stopwords_path": "stopwords/english.txt" <a id="CO170-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO170-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The path to the stopwords file, relative to the Elasticsearch <code class="literal">config</code>
    directory
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="stop-token-filter"></a>Using the stop Token Filter<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <a class="ulink" href="http://bit.ly/1AUzDNI" target="_top"><code class="literal">stop</code> token filter</a> can be combined
with a tokenizer<a id="id-1.6.7.12.7.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.3" class="indexterm"></a><a id="id-1.6.7.12.7.2.4" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.5" class="indexterm"></a> and other token filters when you need to create a <code class="literal">custom</code>
analyzer.  For instance, let’s say that we wanted to <a id="id-1.6.7.12.7.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.8" class="indexterm"></a><a id="id-1.6.7.12.7.2.9" class="indexterm"></a>create a Spanish analyzer
with the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A custom stopwords list
</li><li class="listitem">
The <code class="literal">light_spanish</code> stemmer
</li><li class="listitem">
The <a class="link" href="asciifolding-token-filter.html" title="You Have an Accent"><code class="literal">asciifolding</code> filter</a> to remove diacritics
</li></ul></div><p>We could set that up as follows:</p><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "spanish_stop": {
          "type":        "stop",
          "stopwords": [ "si", "esta", "el", "la" ]  <a id="CO171-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        },
        "light_spanish": { <a id="CO171-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "type":     "stemmer",
          "language": "light_spanish"
        }
      },
      "analyzer": {
        "my_spanish": {
          "tokenizer": "spanish",
          "filter": [ <a id="CO171-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
            "lowercase",
            "asciifolding",
            "spanish_stop",
            "light_spanish"
          ]
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">stop</code> token filter takes the same <code class="literal">stopwords</code> and <code class="literal">stopwords_path</code>
    parameters as the <code class="literal">standard</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
See <a class="xref" href="algorithmic-stemmers.html" title="Algorithmic Stemmers">Algorithmic Stemmers</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The order of token filters is important, as explained next.
</p></td></tr></table></div><p>We have placed the <code class="literal">spanish_stop</code> filter after the <code class="literal">asciifolding</code> filter.<a id="id-1.6.7.12.7.7.3" class="indexterm"></a>
<a id="id-1.6.7.12.7.7.4" class="indexterm"></a> This
means that <code class="literal">esta</code>, <code class="literal">ésta</code>, and <code class="literal">está</code> will first have their diacritics
removed to become just <code class="literal">esta</code>, which will then be removed as a stopword. If,
instead, we wanted to remove <code class="literal">esta</code> and <code class="literal">ésta</code>, but not <code class="literal">está</code>, we
would have to put the <code class="literal">spanish_stop</code> filter <span class="emphasis"><em>before</em></span> the <code class="literal">asciifolding</code>
filter, and specify both words in the stopwords list.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-stopwords"></a>Updating Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A few techniques can be used to update the list of stopwords
used by an analyzer.<a id="id-1.6.7.12.8.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.2" class="indexterm"></a><a id="id-1.6.7.12.8.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.4" class="indexterm"></a> Analyzers are instantiated at index creation time, when a
node is restarted, or when a closed index is reopened.</p><p>If you specify stopwords inline with the <code class="literal">stopwords</code> parameter, your
only option is to close the index and update the analyzer configuration with the
<a class="ulink" href="http://bit.ly/1zijFPx" target="_top">update index settings API</a>, then reopen
the index.</p><p>Updating stopwords is easier if you specify them in a file with the
<code class="literal">stopwords_path</code> parameter.<a id="id-1.6.7.12.8.4.2" class="indexterm"></a>  You can just update the file (on every node in
the cluster) and then force the analyzers to be re-created by either of these actions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Closing and reopening the index
  (see <a class="ulink" href="http://bit.ly/1B6s0WY" target="_top">open/close index</a>), or
</li><li class="listitem">
Restarting each node in the cluster, one by one
</li></ul></div><p>Of course, updating the stopwords list will not change any documents that have
already been indexed. It will apply only to searches and to new or updated
documents.  To apply the changes to existing documents, you will need to
reindex your data. See <a class="xref" href="reindex.html" title="Reindexing Your Data">Reindexing Your Data</a>.</p></div></div><div class="navfooter"><span class="prev"><a href="pros-cons-stopwords.html">
              « 
              Pros and Cons of Stopwords</a>
           
        </span><span class="next">
           
          <a href="stopwords-performance.html">Stopwords and Performance
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + (10 + height) + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        