
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Mapping</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="mapping-analysis.html" title="Mapping and Analysis" /><link rel="prev" href="analysis-intro.html" title="Analysis and Analyzers" /><link rel="next" href="complex-core-fields.html" title="Complex Core Field Types" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link type="text/css" rel="stylesheet" href="/static/css/load.css" />
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />		
	
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/loading.js"></script>
	<script src="/static/js/skel.min.js"></script>
	<script src="/static/js/skel-layers.min.js"></script>
	<script src="/static/js/classie.js"></script>	
	<script type="text/javascript">form_name = "common_layout"</script>
	<script src="/static/js/init.js"></script>
	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

</head>
<body >

	<div class="preloader">
    	<div class="status"></div>
	</div>
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 5u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
					</div>
					<div class="4u 6u(small) 7u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elasticsearch.com" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started </a></span> » <span class="breadcrumb-link"><a href="mapping-analysis.html">Mapping and Analysis</a></span> » <span class="breadcrumb-node">Mapping</span></div><div class="navheader"><span class="prev"><a href="analysis-intro.html">
              « 
              Analysis and Analyzers</a>
           
        </span><span class="next">
           
          <a href="complex-core-fields.html">Complex Core Field Types
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-intro"></a>Mapping<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="_exact_values_versus_full_text.html">Exact Values Versus Full Text</a></span></dt><dt><span class="section"><a href="inverted-index.html">Inverted Index</a></span></dt><dt><span class="section"><a href="analysis-intro.html">Analysis and Analyzers</a></span></dt><dt><span class="section"><a href="mapping-intro.html">Mapping</a></span></dt><dt><span class="section"><a href="complex-core-fields.html">Complex Core Field Types</a></span></dt></dl></div><p>In order to be able to treat date fields as dates, numeric fields as numbers,
and string fields as full-text or exact-value strings, Elasticsearch needs to
know what type of data each field contains. <a id="id-1.4.8.17.2.1" class="indexterm"></a> This information is contained in
the mapping.</p><p>As explained in <a class="xref" href="data-in-data-out.html" title="Data In, Data Out"><em>Data In, Data Out</em></a>, each document in an index <a id="id-1.4.8.17.3.2" class="indexterm"></a>
<a id="id-1.4.8.17.3.3" class="indexterm"></a>has a <span class="emphasis"><em>type</em></span>.
Every type has its own <span class="emphasis"><em>mapping</em></span>, or <span class="emphasis"><em>schema definition</em></span>.<a id="id-1.4.8.17.3.7" class="indexterm"></a> A mapping
defines the fields within a type, the datatype for each field,
and how the field should be handled by Elasticsearch. A mapping is also used
to configure metadata associated with the type.</p><p>We discuss mappings in detail in <a class="xref" href="mapping.html" title="Types and Mappings">Types and Mappings</a>. In this section, we’re going
to look at just enough to get you started.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="core-fields"></a>Core Simple Field Types<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Elasticsearch supports the <a id="id-1.4.8.17.5.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.5.2.2" class="indexterm"></a><a id="id-1.4.8.17.5.2.3" class="indexterm"></a>
<a id="id-1.4.8.17.5.2.4" class="indexterm"></a>following simple field types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
String: <code class="literal">string</code>
</li><li class="listitem">
Whole number: <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">integer</code>, <code class="literal">long</code>
</li><li class="listitem">
Floating-point: <code class="literal">float</code>, <code class="literal">double</code>
</li><li class="listitem">
Boolean: <code class="literal">boolean</code>
</li><li class="listitem">
Date: <code class="literal">date</code>
</li></ul></div><p>When you index a document that contains a new field—one previously not
seen—Elasticsearch <a id="id-1.4.8.17.5.4.1" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.2" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.3" class="indexterm"></a><a id="id-1.4.8.17.5.4.4" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.5" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.6" class="indexterm"></a><a id="id-1.4.8.17.5.4.7" class="indexterm"></a><a id="id-1.4.8.17.5.4.8" class="indexterm"></a><a id="id-1.4.8.17.5.4.9" class="indexterm"></a><a id="id-1.4.8.17.5.4.10" class="indexterm"></a><a id="id-1.4.8.17.5.4.11" class="indexterm"></a><a id="id-1.4.8.17.5.4.12" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.13" class="indexterm"></a>will use <a class="link" href="dynamic-mapping.html" title="Dynamic Mapping"><span class="emphasis"><em>dynamic mapping</em></span></a> to try
to guess the field type from the basic datatypes available in JSON,
using the following rules:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<span class="strong"><strong>JSON type</strong></span>                       
</p>
</td><td valign="top">
<p>
<span class="strong"><strong>Field type</strong></span>
</p>
</td></tr><tr><td valign="top">
<p>
Boolean: <code class="literal">true</code> or <code class="literal">false</code>         
</p>
</td><td valign="top">
<p>
<code class="literal">boolean</code>
</p>
</td></tr><tr><td valign="top">
<p>
Whole number: <code class="literal">123</code>                
</p>
</td><td valign="top">
<p>
<code class="literal">long</code>
</p>
</td></tr><tr><td valign="top">
<p>
Floating point: <code class="literal">123.45</code>           
</p>
</td><td valign="top">
<p>
<code class="literal">double</code>
</p>
</td></tr><tr><td valign="top">
<p>
String, valid date: <code class="literal">2014-09-15</code> 
</p>
</td><td valign="top">
<p>
<code class="literal">date</code>
</p>
</td></tr><tr><td valign="top">
<p>
String: <code class="literal">foo bar</code>                
</p>
</td><td valign="top">
<p>
<code class="literal">string</code>
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>This means that if you index a number in quotes (<code class="literal">"123"</code>), it will be
mapped as type <code class="literal">string</code>, not type <code class="literal">long</code>. However, if the field is
already mapped as type <code class="literal">long</code>, then Elasticsearch will try to convert
the string into a long, and throw an exception if it can’t.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_viewing_the_mapping"></a>Viewing the Mapping<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>We can view the mapping that Elasticsearch has<a id="id-1.4.8.17.6.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.6.2.2" class="indexterm"></a> for one or more types in one or
more indices by using the <code class="literal">/_mapping</code> endpoint. At the <a class="link" href="mapping-analysis.html" title="Mapping and Analysis">start of this chapter</a>, we already retrieved the mapping for type <code class="literal">tweet</code> in index
<code class="literal">gb</code>:</p><pre class="programlisting prettyprint lang-js">GET /gb/_mapping/tweet</pre><p>This shows us the mapping for the <a id="id-1.4.8.17.6.4.1" class="indexterm"></a>fields (called <span class="emphasis"><em>properties</em></span>) that
Elasticsearch generated dynamically from the documents that we indexed:</p><pre class="programlisting prettyprint lang-js">{
   "gb": {
      "mappings": {
         "tweet": {
            "properties": {
               "date": {
                  "type": "date",
                  "format": "dateOptionalTime"
               },
               "name": {
                  "type": "string"
               },
               "tweet": {
                  "type": "string"
               },
               "user_id": {
                  "type": "long"
               }
            }
         }
      }
   }
}</pre><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Incorrect mappings, such as <a id="id-1.4.8.17.6.6.1.1" class="indexterm"></a>
<a id="id-1.4.8.17.6.6.1.2" class="indexterm"></a>having an <code class="literal">age</code> field mapped as type <code class="literal">string</code>
instead of <code class="literal">integer</code>, can produce confusing results to your queries.</p><p>Instead of assuming that your mapping is correct, check it!</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="custom-field-mappings"></a>Customizing Field Mappings<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>While the basic field datatypes are <a id="id-1.4.8.17.7.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.2" class="indexterm"></a><a id="id-1.4.8.17.7.2.3" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.4" class="indexterm"></a>sufficient for many cases, you will often
need to customize the mapping <a id="id-1.4.8.17.7.2.5" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.6" class="indexterm"></a>for individual fields, especially string fields.
Custom mappings allow you to do the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Distinguish between full-text string fields and exact value string fields
</li><li class="listitem">
Use language-specific analyzers
</li><li class="listitem">
Optimize a field for partial matching
</li><li class="listitem">
Specify custom date formats
</li><li class="listitem">
And much more
</li></ul></div><p>The most important attribute of a field is the <code class="literal">type</code>. For fields
other than <code class="literal">string</code> fields, you will seldom need to map anything other
than <code class="literal">type</code>:</p><pre class="programlisting prettyprint lang-js">{
    "number_of_clicks": {
        "type": "integer"
    }
}</pre><p>Fields of type <code class="literal">string</code> are, by default, considered to contain full text.
That is, their value will be passed through<a id="id-1.4.8.17.7.6.2" class="indexterm"></a>
<a id="id-1.4.8.17.7.6.3" class="indexterm"></a> an analyzer before being indexed,
and a full-text query on the field will pass the query string through an
analyzer before searching.</p><p>The two most important mapping<a id="id-1.4.8.17.7.7.1" class="indexterm"></a>
<a id="id-1.4.8.17.7.7.2" class="indexterm"></a> attributes for <code class="literal">string</code> fields are
<code class="literal">index</code> and <code class="literal">analyzer</code>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_index_2"></a>index<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The <code class="literal">index</code> attribute controls<a id="id-1.4.8.17.7.8.2.2" class="indexterm"></a> how the string will be indexed. It
can contain one of three values:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">analyzed</code>
</span></dt><dd>
   First analyze the string and then index it.  In other words, index this field as full text.
</dd><dt><span class="term">
<code class="literal">not_analyzed</code>
</span></dt><dd>
   Index this field, so it is searchable, but index the value exactly as specified. Do not analyze it.
</dd><dt><span class="term">
<code class="literal">no</code>
</span></dt><dd>
   Don’t index this field at all. This field will not be searchable.
</dd></dl></div><p>The default value of <code class="literal">index</code> for a <code class="literal">string</code> field is <code class="literal">analyzed</code>.  If we
want to map the field as an exact value, we need to set it to
<code class="literal">not_analyzed</code>:</p><pre class="programlisting prettyprint lang-js">{
    "tag": {
        "type":     "string",
        "index":    "not_analyzed"
    }
}</pre><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The other simple types (such as <code class="literal">long</code>, <code class="literal">double</code>, <code class="literal">date</code> etc) also accept the
<code class="literal">index</code> parameter, but the only relevant values are <code class="literal">no</code> and <code class="literal">not_analyzed</code>,
as their values are never analyzed.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_analyzer"></a>analyzer<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>For <code class="literal">analyzed</code> string fields, use <a id="id-1.4.8.17.7.9.2.2" class="indexterm"></a>the <code class="literal">analyzer</code> attribute to
specify which analyzer to apply both at search time and at index time. By
default, Elasticsearch uses the <code class="literal">standard</code> analyzer,<a id="id-1.4.8.17.7.9.2.5" class="indexterm"></a>
<a id="id-1.4.8.17.7.9.2.6" class="indexterm"></a> but you can change this
by specifying one of the built-in analyzers, such<a id="id-1.4.8.17.7.9.2.7" class="indexterm"></a> as
<code class="literal">whitespace</code>, <code class="literal">simple</code>, or <code class="literal">english</code>:</p><pre class="programlisting prettyprint lang-js">{
    "tweet": {
        "type":     "string",
        "analyzer": "english"
    }
}</pre><p>In <a class="xref" href="custom-analyzers.html" title="Custom Analyzers">Custom Analyzers</a>, we show you how to define and use custom analyzers
as well.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-a-mapping"></a>Updating a Mapping<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You can specify the mapping for a type when you first <a id="id-1.4.8.17.8.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.2" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.3" class="indexterm"></a><a id="id-1.4.8.17.8.2.4" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.5" class="indexterm"></a>create an index.
Alternatively, you can add the mapping for a new type (or update the mapping
for an existing type) later, using the <code class="literal">/_mapping</code> endpoint.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Although you can <span class="emphasis"><em>add</em></span> to an existing mapping, you can’t <span class="emphasis"><em>change</em></span> it.  If a field
already exists in the mapping, the data from that
field probably has already been indexed.  If you were to change the field mapping, the already indexed data would be wrong and would not be properly searchable.</p></div></div><p>We can update a mapping to add a new field, but we can’t change an existing
field from <code class="literal">analyzed</code> to <code class="literal">not_analyzed</code>.</p><p>To demonstrate both ways of specifying mappings, let’s first delete the <code class="literal">gb</code>
index:</p><pre class="programlisting prettyprint lang-sh">DELETE /gb</pre><a class="sense_widget" href="sense_widget.html?snippets/052_Mapping_Analysis/45_Mapping.json" target="sense">View in Sense</a><p>Then create a new index, specifying that the <code class="literal">tweet</code> field should use
the <code class="literal">english</code> analyzer:</p><pre class="programlisting prettyprint lang-js">PUT /gb <a id="CO17-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "mappings": {
    "tweet" : {
      "properties" : {
        "tweet" : {
          "type" :    "string",
          "analyzer": "english"
        },
        "date" : {
          "type" :   "date"
        },
        "name" : {
          "type" :   "string"
        },
        "user_id" : {
          "type" :   "long"
        }
      }
    }
  }
}</pre><a class="sense_widget" href="sense_widget.html?snippets/052_Mapping_Analysis/45_Mapping.json" target="sense">View in Sense</a><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO17-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This creates the index with the <code class="literal">mappings</code> specified in the body.
</p></td></tr></table></div><p>Later on, we decide to add a new <code class="literal">not_analyzed</code> text field called <code class="literal">tag</code> to the
<code class="literal">tweet</code> mapping, using the <code class="literal">_mapping</code> endpoint:</p><pre class="programlisting prettyprint lang-js">PUT /gb/_mapping/tweet
{
  "properties" : {
    "tag" : {
      "type" :    "string",
      "index":    "not_analyzed"
    }
  }
}</pre><a class="sense_widget" href="sense_widget.html?snippets/052_Mapping_Analysis/45_Mapping.json" target="sense">View in Sense</a><p>Note that we didn’t need to list all of the existing fields again, as we can’t
change them anyway.  Our new field has been merged into the existing mapping.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_testing_the_mapping"></a>Testing the Mapping<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/052_Mapping_Analysis/45_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You can use the <code class="literal">analyze</code> API to<a id="id-1.4.8.17.9.2.2" class="indexterm"></a>
<a id="id-1.4.8.17.9.2.3" class="indexterm"></a> test the mapping for string fields by
name. Compare the output of these two requests:</p><pre class="programlisting prettyprint lang-js">GET /gb/_analyze?field=tweet
Black-cats <a id="CO18-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>

GET /gb/_analyze?field=tag
Black-cats <a id="CO18-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre><a class="sense_widget" href="sense_widget.html?snippets/052_Mapping_Analysis/45_Mapping.json" target="sense">View in Sense</a><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO18-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO18-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The text we want to analyze is passed in the body.
</p></td></tr></table></div><p>The <code class="literal">tweet</code> field produces the two terms <code class="literal">black</code> and <code class="literal">cat</code>, while the
<code class="literal">tag</code> field produces the single term <code class="literal">Black-cats</code>. In other words, our
mapping is working correctly.</p></div></div><div class="navfooter"><span class="prev"><a href="analysis-intro.html">
              « 
              Analysis and Analyzers</a>
           
        </span><span class="next">
           
          <a href="complex-core-fields.html">Complex Core Field Types
               »
            </a></span></div>
<!-- end body -->

            </section>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div>
<!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elasticsearch" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<div class="preloader">
    	<div class="status"></div>
	</div>
  	<style></style>
   	<link type="text/css" rel="stylesheet" href="/static/css/flexslider.css" >

<script src="/static/js/jquery.flexslider.min.js"></script>
<script src="/static/js/jquery.dropdown.min.js"></script>
<script src="/static/js/script.js"></script>
   	
</body>