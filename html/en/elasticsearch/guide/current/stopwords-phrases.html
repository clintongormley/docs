
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Stopwords and Phrase Queries</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="stopwords.html" title="Stopwords: Performance Versus Precision" /><link rel="prev" href="common-terms.html" title="Divide and Conquer" /><link rel="next" href="common-grams.html" title="common_grams Token Filter" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container w100">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
								<li><a class="m-contact" href="/contact"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="https://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language </a></span> » <span class="breadcrumb-link"><a href="stopwords.html">Stopwords: Performance Versus Precision</a></span> » <span class="breadcrumb-node">Stopwords and Phrase Queries</span></div><div class="navheader"><span class="prev"><a href="common-terms.html">
              « 
              Divide and Conquer</a>
           
        </span><span class="next">
           
          <a href="common-grams.html">common_grams Token Filter
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopwords-phrases"></a>Stopwords and Phrase Queries<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/50_Phrase_queries.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="pros-cons-stopwords.html">Pros and Cons of Stopwords</a></span></dt><dt><span class="section"><a href="using-stopwords.html">Using Stopwords</a></span></dt><dt><span class="section"><a href="stopwords-performance.html">Stopwords and Performance</a></span></dt><dt><span class="section"><a href="common-terms.html">Divide and Conquer</a></span></dt><dt><span class="section"><a href="stopwords-phrases.html">Stopwords and Phrase Queries</a></span></dt><dt><span class="section"><a href="common-grams.html">common_grams Token Filter</a></span></dt><dt><span class="section"><a href="stopwords-relavance.html">Stopwords and Relevance</a></span></dt></dl></div><p>About 5% of all queries are <a id="id-1.6.7.15.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.2.2" class="indexterm"></a><a id="id-1.6.7.15.2.3" class="indexterm"></a>
<a id="id-1.6.7.15.2.4" class="indexterm"></a>phrase queries (see <a class="xref" href="phrase-matching.html" title="Phrase Matching">Phrase Matching</a>), but they
often account for the majority of slow queries. Phrase queries can perform
poorly, especially if the phrase includes very common words; a phrase like
“To be, or not to be” could be considered pathological. The reason for this
has to do with the amount of data that is necessary to support proximity
matching.</p><p>In <a class="xref" href="pros-cons-stopwords.html" title="Pros and Cons of Stopwords">Pros and Cons of Stopwords</a>, we said that removing stopwords saves only a small
amount of space in the inverted index.<a id="id-1.6.7.15.3.2" class="indexterm"></a>
<a id="id-1.6.7.15.3.3" class="indexterm"></a>  That was only partially true.  A
typical index may contain, among other data, some or all of the following:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Terms dictionary
</span></dt><dd>
    A sorted list of all terms that appear in the documents in the index,
    and a count of the number of documents that contain each term.
</dd><dt><span class="term">
Postings list
</span></dt><dd>
    A list of which documents contain each term.
</dd><dt><span class="term">
Term frequency
</span></dt><dd>
    How often each term appears in each document.
</dd><dt><span class="term">
Positions
</span></dt><dd>
    The position of each term within each document, for phrase and proximity
    queries.
</dd><dt><span class="term">
Offsets
</span></dt><dd>
    The start and end character offsets of each term in each document, for
    snippet highlighting. Disabled by default.
</dd><dt><span class="term">
Norms
</span></dt><dd>
    A factor used to normalize fields of different lengths, to give shorter
    fields more weight.
</dd></dl></div><p>Removing stopwords from the index may save a small amount of space in the
<span class="emphasis"><em>terms dictionary</em></span> and the <span class="emphasis"><em>postings list</em></span>, but <span class="emphasis"><em>positions</em></span> and <span class="emphasis"><em>offsets</em></span> are
another matter. Positions and offsets data can easily double, triple, or
quadruple index size.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_positions_data"></a>Positions Data<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/50_Phrase_queries.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Positions are enabled on <code class="literal">analyzed</code> string fields by default,<a id="id-1.6.7.15.6.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.3" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.4" class="indexterm"></a><a id="id-1.6.7.15.6.2.5" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.6" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.7" class="indexterm"></a> so that phrase
queries will work out of the box. The more often that a term appears, the more
space is needed to store its position data. Very common words, by
definition, appear very commonly, and their positions data can run to megabytes
or gigabytes on large collections.</p><p>Running a phrase query on a high-frequency word like <code class="literal">the</code> might result in
gigabytes of data being read from disk. That data will be stored in the kernel
filesystem cache to speed up later access, which seems like a good thing, but
it might cause other data to be evicted from the cache, which will slow
subsequent queries.</p><p>This is clearly a problem that needs solving.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-options"></a>Index Options<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/50_Phrase_queries.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The first question you should <a id="id-1.6.7.15.7.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.3" class="indexterm"></a><a id="id-1.6.7.15.7.2.4" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.5" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.6" class="indexterm"></a>ask yourself is: <span class="emphasis"><em>Do you need phrase or
proximity queries?</em></span></p><p>Often, the answer is no.  For many use cases, such as logging, you need to
know <span class="emphasis"><em>whether</em></span> a term appears in a document — information that is provided
by the postings list—but not <span class="emphasis"><em>where</em></span> it appears. Or perhaps you need to use
phrase queries on one or two fields, but you can disable positions data on all
of the other analyzed <code class="literal">string</code> fields.</p><p>The <code class="literal">index_options</code> parameter <a id="id-1.6.7.15.7.4.2" class="indexterm"></a>allows you to control what information is stored
in the index for each field.<a id="id-1.6.7.15.7.4.3" class="indexterm"></a>
<a id="id-1.6.7.15.7.4.4" class="indexterm"></a>  Valid values are as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">docs</code>
</span></dt><dd>
    Only store which documents contain which terms. This is the default for
    <code class="literal">not_analyzed</code> string fields.
</dd><dt><span class="term">
<code class="literal">freqs</code>
</span></dt><dd>
    Store <code class="literal">docs</code> information, plus how often each term appears in each
    document. Term frequencies are needed for complete <a class="link" href="relevance-intro.html" title="What Is Relevance?">TF/IDF</a>
    relevance calculations, but they are not required if you just need to know
    whether a document contains a particular term.
</dd><dt><span class="term">
<code class="literal">positions</code>
</span></dt><dd>
    Store <code class="literal">docs</code> and <code class="literal">freqs</code>, plus the position of each term in each document.
    This is the default for <code class="literal">analyzed</code> string fields, but can be disabled if
    phrase/proximity matching is not needed.
</dd><dt><span class="term">
<code class="literal">offsets</code>
</span></dt><dd>
    Store <code class="literal">docs</code>, <code class="literal">freqs</code>, <code class="literal">positions</code>, and the start and end character offsets
    of each term in the original string.  This information is used by the
    <a class="ulink" href="http://bit.ly/1u9PJ16" target="_top"><code class="literal">postings</code> highlighter</a>
    but is disabled by default.
</dd></dl></div><p>You can set <code class="literal">index_options</code> on fields added at index creation time, or when
adding new fields by using<a id="id-1.6.7.15.7.6.2" class="indexterm"></a> the <code class="literal">put-mapping</code> API. This setting can’t be changed
on existing fields:</p><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "mappings": {
    "my_type": {
      "properties": {
        "title": { <a id="CO175-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type":          "string"
       },
        "content": { <a id="CO175-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "type":          "string",
          "index_options": "freqs"
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO175-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">title</code> field uses the default setting of <code class="literal">positions</code>, so
    it is suitable for phrase/proximity queries.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO175-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">content</code> field has positions disabled and so cannot be used
    for phrase/proximity queries.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stopwords"></a>Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/50_Phrase_queries.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Removing stopwords is one way of reducing the size of the positions data quite
dramatically.<a id="id-1.6.7.15.8.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.8.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.8.2.3" class="indexterm"></a>   An index with stopwords removed can still be used for phrase
queries because the original positions of the remaining terms are maintained,
as we saw in <a class="xref" href="using-stopwords.html#maintaining-positions" title="Maintaining Positions">Maintaining Positions</a>. But of course, excluding terms from
the index reduces searchability. We wouldn’t be able to differentiate between
the two phrases <span class="emphasis"><em>Man in the moon</em></span> and <span class="emphasis"><em>Man on the moon</em></span>.</p><p>Fortunately, there is a way to have our cake and eat it: the
<a class="link" href="common-grams.html" title="common_grams Token Filter"><code class="literal">common_grams</code> token filter</a>.</p></div></div><div class="navfooter"><span class="prev"><a href="common-terms.html">
              « 
              Divide and Conquer</a>
           
        </span><span class="next">
           
          <a href="common-grams.html">common_grams Token Filter
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + (10 + height) + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        