
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Future Mode</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch-PHP [2.0]" /><link rel="up" href="index.html" title="Elasticsearch-PHP [2.0]" /><link rel="prev" href="_per_request_configuration.html" title="Per-request configuration" /><link rel="next" href="_dealing_with_json_arrays_and_objects_in_php.html" title="Dealing with JSON Arrays and Objects in PHP" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch-PHP
      [2.0]
    </a></span> » <span class="breadcrumb-node">Future Mode</span></div><div class="navheader"><span class="prev"><a href="_per_request_configuration.html">
              « 
              Per-request configuration</a>
           
        </span><span class="next">
           
          <a href="_dealing_with_json_arrays_and_objects_in_php.html">Dealing with JSON Arrays and Objects in PHP
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="_future_mode"></a>Future Mode<a href="https://github.com/elasticsearch/elasticsearch-php/edit/2.0/docs/futures.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="_overview.html">Overview</a></span></dt><dt><span class="chapter"><a href="_quickstart.html">Quickstart</a></span></dt><dt><span class="chapter"><a href="_installation_2.html">Installation</a></span></dt><dt><span class="chapter"><a href="_configuration.html">Configuration</a></span></dt><dt><span class="chapter"><a href="_per_request_configuration.html">Per-request configuration</a></span></dt><dt><span class="chapter"><a href="_future_mode.html">Future Mode</a></span></dt><dt><span class="chapter"><a href="_dealing_with_json_arrays_and_objects_in_php.html">Dealing with JSON Arrays and Objects in PHP</a></span></dt><dt><span class="chapter"><a href="_index_management_operations.html">Index Management Operations</a></span></dt><dt><span class="chapter"><a href="_indexing_documents.html">Indexing Documents</a></span></dt><dt><span class="chapter"><a href="_getting_documents.html">Getting Documents</a></span></dt><dt><span class="chapter"><a href="_updating_documents.html">Updating Documents</a></span></dt><dt><span class="chapter"><a href="_deleting_documents.html">Deleting documents</a></span></dt><dt><span class="chapter"><a href="_search_operations.html">Search Operations</a></span></dt><dt><span class="chapter"><a href="_namespaces.html">Namespaces</a></span></dt><dt><span class="chapter"><a href="_security.html">Security</a></span></dt><dt><span class="chapter"><a href="_connection_pool.html">Connection Pool</a></span></dt><dt><span class="chapter"><a href="_selectors.html">Selectors</a></span></dt><dt><span class="chapter"><a href="_serializers.html">Serializers</a></span></dt><dt><span class="chapter"><a href="_php_version_requirement.html">PHP Version Requirement</a></span></dt><dt><span class="chapter"><a href="_breaking_changes_from_1_x.html">Breaking changes from 1.x</a></span></dt></dl></div><p>The client offers a mode called "future" or "async" mode.  This allows batch processing of requests (sent in parallel
to the cluster), which can have a dramatic impact on performance and throughput.</p><p>PHP is fundamentally single-threaded, however libcurl provides functionality called the "multi interface".  This allows
languages like PHP to gain concurrency by providing a batch of requests to process.  The batch is executed in a parallel
by the underlying multithreaded libcurl library, and the batch of responses is then returned to PHP.</p><p>In a single-threaded environment, the time to execute <code class="literal">n</code> requests is the sum of those <code class="literal">n</code> request’s latencies.  With
the multi interface, the time to execute <code class="literal">n</code> requests is the latency of the slowest request (assuming enough handles
are available to execute all requests in parallel).</p><p>Furthermore, the multi-interface allows requests to different hosts simultaneously, which means the Elasticsearch-PHP
client can more effectively utilize your full cluster.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_using_future_mode"></a>Using Future Mode<a href="https://github.com/elasticsearch/elasticsearch-php/edit/2.0/docs/futures.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Utilizing this feature is relatively straightforward, but it does introduce more responsibility into your code.  To enable
future mode, set the <code class="literal">future</code> flag in the client options to <code class="literal">'lazy'</code>:</p><pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();

$params = [
    'index' =&gt; 'test',
    'type' =&gt; 'test',
    'id' =&gt; 1,
    'client' =&gt; [
        'future' =&gt; 'lazy'
    ]
];

$future = $client-&gt;get($params);</pre><p>This will return a <span class="emphasis"><em>future</em></span>, rather than the actual response.  A future represents a <span class="emphasis"><em>future computation</em></span> and acts like
a placeholder.  You can pass a future around your code like a regular object.  When you need the result values, you
can <span class="emphasis"><em>resolve</em></span> the future.  If the future has already resolved (due to some other activity), the values will be immediately
available.  If the future has not resolved yet, the resolution will block until those values have become available (e.g.
after the API call completes).</p><p>In practice, this means you can queue up a batch of requests by using <code class="literal">future: lazy</code> and they will pend until you resolve
the futures, at which time all requests will be sent in parallel to the cluster and return asynchronously to curl.</p><p>This sounds tricky, but it is actually very simple thanks to RingPHP’s <code class="literal">FutureArray</code> interface, which makes the future
act like a simple associative array.  For example:</p><pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();

$params = [
    'index' =&gt; 'test',
    'type' =&gt; 'test',
    'id' =&gt; 1,
    'client' =&gt; [
        'future' =&gt; 'lazy'
    ]
];

$future = $client-&gt;get($params);

$doc = $future['_source'];    // This call will block and force the future to resolve</pre><p>Interacting with the future as an associative array, just like a normal response, will cause the future to resolve
that particular value (which in turn resolves all pending requests and values).  This allows patterns such as:</p><pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();
$futures = [];

for ($i = 0; $i &lt; 1000; $i++) {
    $params = [
        'index' =&gt; 'test',
        'type' =&gt; 'test',
        'id' =&gt; $i,
        'client' =&gt; [
            'future' =&gt; 'lazy'
        ]
    ];

    $futures[] = $client-&gt;get($params);     //queue up the request
}


foreach ($futures as $future) {
    // access future's values, causing resolution if necessary
    echo $future['_source'];
}</pre><p>The queued requests will execute in parallel and populate their futures after execution.  Batch size defaults to
100 requests-per-batch.</p><p>If you wish to force future resolution, but don’t actually need the values immediately, you can call <code class="literal">wait()</code> on the future
to force resolution too:</p><pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();
$futures = [];

for ($i = 0; $i &lt; 1000; $i++) {
    $params = [
        'index' =&gt; 'test',
        'type' =&gt; 'test',
        'id' =&gt; $i,
        'client' =&gt; [
            'future' =&gt; 'lazy'
        ]
    ];

    $futures[] = $client-&gt;get($params);     //queue up the request
}

//wait() forces future resolution and will execute the underlying curl batch
$futures[999]-&gt;wait();</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_changing_batch_size"></a>Changing batch size<a href="https://github.com/elasticsearch/elasticsearch-php/edit/2.0/docs/futures.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The default batch size is 100, meaning 100 requests will queue up before the client forces futures to begin resolving
(e.g. initiate a <code class="literal">curl_multi</code> call).  The batch size can be changed depending on your preferences.  The batch size
is controllable via the <code class="literal">max_handles</code> setting when configuring the handler:</p><pre class="programlisting prettyprint lang-php">$handlerParams = [
    'max_handles' =&gt; 500
];

$defaultHandler = ClientBuilder::defaultHandler($handlerParams);

$client = ClientBuilder::create()
            -&gt;setHandler($defaultHandler)
            -&gt;build();</pre><p>This will change the behavior to wait on 500 queued requests before sending the batch.  Note, however, that forcing a
future to resolve will cause the underlying curl batch to execute, regardless of if the batch is "full" or not.  In this
example, only 499 requests are added to the queue…but the final future resolution will force the batch to flush
anyway:</p><pre class="programlisting prettyprint lang-php">$handlerParams = [
    'max_handles' =&gt; 500
];

$defaultHandler = ClientBuilder::defaultHandler($handlerParams);

$client = ClientBuilder::create()
            -&gt;setHandler($defaultHandler)
            -&gt;build();

$futures = [];

for ($i = 0; $i &lt; 499; $i++) {
    $params = [
        'index' =&gt; 'test',
        'type' =&gt; 'test',
        'id' =&gt; $i,
        'client' =&gt; [
            'future' =&gt; 'lazy'
        ]
    ];

    $futures[] = $client-&gt;get($params);     //queue up the request
}

// resolve the future, and therefore the underlying batch
$body = $future[499]['body'];</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_heterogeneous_batches_are_ok"></a>Heterogeneous batches are OK<a href="https://github.com/elasticsearch/elasticsearch-php/edit/2.0/docs/futures.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>It is possible to queue up heterogeneous batches of requests.  For example, you can queue up several GETs, indexing requests
and a search:</p><pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();
$futures = [];

$params = [
    'index' =&gt; 'test',
    'type' =&gt; 'test',
    'id' =&gt; 1,
    'client' =&gt; [
        'future' =&gt; 'lazy'
    ]
];

$futures['getRequest'] = $client-&gt;get($params);     // First request

$params = [
    'index' =&gt; 'test',
    'type' =&gt; 'test',
    'id' =&gt; 2,
    'body' =&gt; [
        'field' =&gt; 'value'
    ],
    'client' =&gt; [
        'future' =&gt; 'lazy'
    ]
];

$futures['indexRequest'] = $client-&gt;index($params);       // Second request

$params = [
    'index' =&gt; 'test',
    'type' =&gt; 'test',,
    'body' =&gt; [
        'query' =&gt; [
            'match' =&gt; [
                'field' =&gt; 'value'
            ]
        ]
    ],
    'client' =&gt; [
        'future' =&gt; 'lazy'
    ]
];

$futures['searchRequest'] = $client-&gt;search($params);      // Third request

// Resolve futures...blocks until network call completes
$searchResults = $futures['searchRequest']['hits'];

// Should return immediately, since the previous future resolved the entire batch
$doc = $futures['getRequest']['_source'];</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_caveats_to_future_mode"></a>Caveats to Future mode<a href="https://github.com/elasticsearch/elasticsearch-php/edit/2.0/docs/futures.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>There are a few caveats to using future mode.  The biggest is also the most obvious: you need to deal with resolving the
future yourself.  This is usually trivia, but can sometimes introduce unexpected complications.</p><p>For example, if you resolve manually using <code class="literal">wait()</code>, you may need to call <code class="literal">wait()</code> several times if there were retries.
This is because each retry will introduce another layer of wrapped futures, and each needs to be resolved to get the
final result.</p><p>This is not needed if you access values via the ArrayInterface however (e.g. <code class="literal">$response['hits']['hits']</code>), since
FutureArrayInterface will automatically and fully resolve the future to provide values.</p><p>Another caveat is that certain APIs will lose their "helper" functionality.  For example, "exists" APIs (e.g.
<code class="literal">$client-&gt;exists()</code>, <code class="literal">$client-&gt;indices()-&gt;exists</code>, <code class="literal">$client-&gt;indices-&gt;templateExists()</code>, etc) typically return a true
or false under normal operation.</p><p>When operated in future mode, unwrapping of the future is left to your application,
which means the client can no longer inspect the response and return a simple true/false.  Instead, you’ll see the raw
response from Elasticsearch and will have to take action appropriately.</p><p>This also applies to <code class="literal">ping()</code>.</p></div></div><div class="navfooter"><span class="prev"><a href="_per_request_configuration.html">
              « 
              Per-request configuration</a>
           
        </span><span class="next">
           
          <a href="_dealing_with_json_arrays_and_objects_in_php.html">Dealing with JSON Arrays and Objects in PHP
               »
            </a></span></div>
<!-- end body -->

            </section>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   		<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        