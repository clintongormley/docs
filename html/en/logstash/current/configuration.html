
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring Logstash</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="index.html" title="Reference" /><link rel="prev" href="_command_line_flags.html" title="Command-line flags" /><link rel="next" href="config-examples.html" title="Logstash Configuration Examples" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js"></script>
	<script src="/static/js/classie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/guide_template.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container w100">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 6u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
						<div class="mobile-auto-complete"></div> 
					</div>
					<div class="4u 6u(small) 6u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
								<li><a class="m-contact" href="/contact"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="https://purchases.elastic.co" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
											<li><a href="/elasticon">elastic{ON}</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elastic.co" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
			<div class="nav-auto-complete"></div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> » <span class="breadcrumb-node">Configuring Logstash</span></div><div class="navheader"><span class="prev"><a href="_command_line_flags.html">
              « 
              Command-line flags</a>
           
        </span><span class="next">
           
          <a href="config-examples.html">Logstash Configuration Examples
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuration"></a>Configuring Logstash<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><div class="toc"><dl><dt><span class="preface"><a href="logstash-reference.html">Preface</a></span></dt><dt><span class="chapter"><a href="getting-started-with-logstash.html">Getting Started with Logstash</a></span></dt><dt><span class="chapter"><a href="package-repositories.html">Package Repositories</a></span></dt><dt><span class="chapter"><a href="_command_line_flags.html">Command-line flags</a></span></dt><dt><span class="chapter"><a href="configuration.html">Configuring Logstash</a></span></dt><dt><span class="chapter"><a href="pipeline.html">Logstash Processing Pipeline</a></span></dt><dt><span class="chapter"><a href="input-plugins.html">Input plugins</a></span></dt><dt><span class="chapter"><a href="output-plugins.html">Output plugins</a></span></dt><dt><span class="chapter"><a href="filter-plugins.html">Filter plugins</a></span></dt><dt><span class="chapter"><a href="codec-plugins.html">Codec plugins</a></span></dt><dt><span class="chapter"><a href="contributing-to-logstash.html">Contributing to Logstash</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_input_plugin.html">How to write a Logstash input plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_input_plugin_2.html">How to write a Logstash input plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_input_plugin_3.html">How to write a Logstash input plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_input_plugin_4.html">How to write a Logstash input plugin</a></span></dt></dl></div><p>To configure Logstash, you create a config file that specifies which plugins you want to use and settings for each plugin.
You can reference event fields in a configuration and use conditionals to process events when they meet certain
criteria. When you run logstash, you use the <code class="literal">-f</code> to specify your config file.</p><p>Let’s step through creating a simple config file and using it to run Logstash. Create a file named "logstash-simple.conf" and save it in the same directory as Logstash.</p><pre class="programlisting prettyprint lang-ruby">input { stdin { } }
output {
  elasticsearch { host =&gt; localhost }
  stdout { codec =&gt; rubydebug }
}</pre><p>Then, run logstash and specify the configuration file with the <code class="literal">-f</code> flag.</p><pre class="programlisting prettyprint lang-ruby">bin/logstash -f logstash-simple.conf</pre><p>Et voilà! Logstash reads  the specified configuration file and outputs to both Elasticsearch and stdout. Before we
move on to some <a class="link" href="config-examples.html" title="Logstash Configuration Examples">more complex examples</a>, let’s take a closer look at what’s in a config file.</p><h3><a id="_structure_of_a_config_file"></a>Structure of a Config File<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>A Logstash config file has a separate section for each type of plugin you want to add to the event processing pipeline. For example:</p><pre class="programlisting prettyprint lang-js"># This is a comment. You should use comments to describe
# parts of your configuration.
input {
  ...
}

filter {
  ...
}

output {
  ...
}</pre><p>Each section contains the configuration options for one or more plugins. If you specify
multiple filters, they are applied in the order of their appearance in the configuration file.</p><h3><a id="plugin_configuration"></a>Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The configuration of a plugin consists of the plugin name followed
by a block of settings for that plugin. For example, this input section configures two file inputs:</p><pre class="programlisting prettyprint lang-js">input {
  file {
    path =&gt; "/var/log/messages"
    type =&gt; "syslog"
  }

  file {
    path =&gt; "/var/log/apache/access.log"
    type =&gt; "apache"
  }
}</pre><p>In this example, two settings are configured for each of the file inputs: <span class="emphasis"><em>path</em></span> and <span class="emphasis"><em>type</em></span>.</p><p>The settings you can configure vary according to the plugin type. For information about each plugin, see <a class="link" href="input-plugins.html" title="Input plugins">Input Plugins</a>, <a class="link" href="output-plugins.html" title="Output plugins">Output Plugins</a>, <a class="link" href="filter-plugins.html" title="Filter plugins">Filter Plugins</a>, and <a class="link" href="codec-plugins.html" title="Codec plugins">Codec Plugins</a>.</p><h3><a id="_value_types"></a>Value Types<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>A plugin can require that the value for a setting be a
certain type, such as boolean or hash. The following value
types are supported.</p><h4><a id="array"></a>Array<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>An array can be a single string value or multiple values. If you specify the same
setting multiple times, it appends to the array.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  path =&gt; [ "/var/log/messages", "/var/log/*.log" ]
  path =&gt; "/data/mysql/mysql.log"</pre><p>This example configures <code class="literal">path</code> to be an array that contains an element for each of the three strings.</p><h4><a id="boolean"></a>Boolean<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A boolean must be either <code class="literal">true</code> or <code class="literal">false</code>. Note that the <code class="literal">true</code> and <code class="literal">false</code> keywords
are not enclosed in quotes.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  ssl_enable =&gt; true</pre><h4><a id="bytes"></a>Bytes<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A bytes field is a string field that represents a valid unit of bytes. It is a
convenient way to declare specific sizes in your plugin options. Both SI (k M G T P E Z Y)
and Binary (Ki Mi Gi Ti Pi Ei Zi Yi) units are supported. Binary units are in
base-1024 and SI units are in base-1000. This field is case-insensitive
and accepts space between the value and the unit. If no unit is specified, the integer string
represents the number of bytes.</p><p>Examples:</p><pre class="programlisting prettyprint lang-js">  my_bytes =&gt; "1113"   # 1113 bytes
  my_bytes =&gt; "10MiB"  # 10485760 bytes
  my_bytes =&gt; "100kib" # 102400 bytes
  my_bytes =&gt; "180 mb" # 180000000 bytes</pre><h4><a id="codec"></a>Codec<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A codec is the name of Logstash codec used to represent the data. Codecs can be
used in both inputs and outputs.</p><p>Input codecs provide a convenient way to decode your data before it enters the input.
Output codecs provide a convenient way to encode your data before it leaves the output.
Using an input or output codec eliminates the need for a separate filter in your Logstash pipeline.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  codec =&gt; "json"</pre><h4><a id="hash"></a>Hash<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A hash is a collection of key value pairs specified in the format <code class="literal">"field1" =&gt; "value1"</code>.
Note that mutliple key value entries are separated by spaces rather than commas.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">match =&gt; {
  "field1" =&gt; "value1"
  "field2" =&gt; "value2"
  ...
}</pre><h4><a id="number"></a>Number<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Numbers must be valid numeric values (floating point or integer).</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  port =&gt; 33</pre><h4><a id="password"></a>Password<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A password is a string with a single value that is not logged or printed.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  my_password =&gt; "password"</pre><h4><a id="path"></a>Path<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A path is a string that represents a valid operating system path.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  my_path =&gt; "/tmp/logstash"</pre><h4><a id="string"></a>String<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A string must be a single character sequence. Note that string values are enclosed in quotes.</p><p>Example:</p><pre class="programlisting prettyprint lang-js">  name =&gt; "Hello world"</pre><h3><a id="_comments"></a>Comments<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Comments are the same as in perl, ruby, and python. A comment starts with a <span class="emphasis"><em>#</em></span> character, and does not need to be at the beginning of a line. For example:</p><pre class="programlisting prettyprint lang-js"># this is a comment

input { # comments can appear at the end of a line, too
  # ...
}</pre><h3><a id="event-dependent-configuration"></a>Event Dependent Configuration<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The logstash agent is a processing pipeline with 3 stages: inputs → filters →
outputs. Inputs generate events, filters modify them, outputs ship them
elsewhere.</p><p>All events have properties. For example, an apache access log would have things
like status code (200, 404), request path ("/", "index.html"), HTTP verb
(GET, POST), client IP address, etc. Logstash calls these properties "fields."</p><p>Some of the configuration options in Logstash require the existence of fields in
order to function.  Because inputs generate events, there are no fields to
evaluate within the input block—they do not exist yet!</p><p>Because of their dependency on events and fields, the following configuration
options will only work within filter and output blocks.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Field references, sprintf format and conditionals, described below,
will not work in an input block.</p></div></div><h4><a id="logstash-config-field-references"></a>Field References<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>It is often useful to be able to refer to a field by name. To do this,
you can use the Logstash field reference syntax.</p><p>The syntax to access a field is <code class="literal">[fieldname]</code>. If you are referring to a
<span class="strong"><strong>top-level field</strong></span>, you can omit the <code class="literal">[]</code> and simply use <code class="literal">fieldname</code>.
To refer to a <span class="strong"><strong>nested field</strong></span>, you specify
the full path to that field: <code class="literal">[top-level field][nested field]</code>.</p><p>For example, the following event has five top-level fields (agent, ip, request, response,
ua) and three nested fields (status, bytes, os).</p><pre class="programlisting prettyprint lang-js">{
  "agent": "Mozilla/5.0 (compatible; MSIE 9.0)",
  "ip": "192.168.24.44",
  "request": "/index.html"
  "response": {
    "status": 200,
    "bytes": 52353
  },
  "ua": {
    "os": "Windows 7"
  }
}</pre><p>To reference the <code class="literal">os</code> field, you specify <code class="literal">[ua][os]</code>. To reference a top-level
field such as <code class="literal">request</code>, you can simply specify the field name.</p><h4><a id="sprintf"></a>sprintf format<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The field reference format is also used in what Logstash calls <span class="emphasis"><em>sprintf format</em></span>. This format
enables you to refer to field values from within other strings. For example, the
statsd output has an <span class="emphasis"><em>increment</em></span> setting that enables you to keep a count of
apache logs by status code:</p><pre class="programlisting prettyprint lang-js">output {
  statsd {
    increment =&gt; "apache.%{[response][status]}"
  }
}</pre><p>You can also format times using in this sprintf format. Instead of specifying a field name, use the <code class="literal">+FORMAT</code> syntax where <code class="literal">FORMAT</code> is a <a class="ulink" href="http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html" target="_top">time format</a>.</p><p>For example, if you want to use the file output to write to logs based on the
hour and the <span class="emphasis"><em>type</em></span> field:</p><pre class="programlisting prettyprint lang-js">output {
  file {
    path =&gt; "/var/log/%{type}.%{+yyyy.MM.dd.HH}"
  }
}</pre><h4><a id="conditionals"></a>Conditionals<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Sometimes you only want to filter or output an event under
certain conditions. For that, you can use a conditional.</p><p>Conditionals in Logstash look and act the same way they do in programming
languages. Conditionals support <code class="literal">if</code>, <code class="literal">else if</code> and <code class="literal">else</code> statements
and can be nested.</p><p>The conditional syntax is:</p><pre class="programlisting prettyprint lang-js">if EXPRESSION {
  ...
} else if EXPRESSION {
  ...
} else {
  ...
}</pre><p>What’s an expression? Comparison tests, boolean logic, and so on!</p><p>You can use the following comparison operators:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
equality: ==,  !=,  &lt;,  &gt;,  ⇐,  &gt;=
</li><li class="listitem">
regexp: =<sub>, !</sub>
</li><li class="listitem">
inclusion: in, not in
</li></ul></div><p>The supported boolean operators are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
and, or, nand, xor
</li></ul></div><p>The supported unary operators are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
!
</li></ul></div><p>Expressions can be long and complex. Expressions can contain other expressions,
you can negate expressions with <code class="literal">!</code>, and you can group them with parentheses <code class="literal">(...)</code>.</p><p>For example, the following conditional uses the mutate filter to remove the field <code class="literal">secret</code> if the field
<code class="literal">action</code> has a value of <code class="literal">login</code>:</p><pre class="programlisting prettyprint lang-js">filter {
  if [action] == "login" {
    mutate { remove =&gt; "secret" }
  }
}</pre><p>You can specify multiple expressions in a single condition:</p><pre class="programlisting prettyprint lang-js">output {
  # Send production errors to pagerduty
  if [loglevel] == "ERROR" and [deployment] == "production" {
    pagerduty {
    ...
    }
  }
}</pre><p>The <code class="literal">in</code> conditional enables you to compare against the value of a field:</p><pre class="programlisting prettyprint lang-js">filter {
  if [foo] in [foobar] {
    mutate { add_tag =&gt; "field in field" }
  }
  if [foo] in "foo" {
    mutate { add_tag =&gt; "field in string" }
  }
  if "hello" in [greeting] {
    mutate { add_tag =&gt; "string in field" }
  }
  if [foo] in ["hello", "world", "foo"] {
    mutate { add_tag =&gt; "field in list" }
  }
  if [missing] in [alsomissing] {
    mutate { add_tag =&gt; "shouldnotexist" }
  }
  if !("foo" in ["hello", "world"]) {
    mutate { add_tag =&gt; "shouldexist" }
  }
}</pre><p>You use the <code class="literal">not in</code> conditional the same way. For example,
you could use <code class="literal">not in</code> to only route events to elasticsearch
when <code class="literal">grok</code> is successful:</p><pre class="programlisting prettyprint lang-js">output {
  if "_grokparsefailure" not in [tags] {
    elasticsearch { ... }
  }
}</pre><p>For more complex examples, see <a class="link" href="config-examples.html#using-conditionals" title="Using Conditionalsedit">Using Conditionals</a>.</p><h4><a id="metadata"></a>The @metadata field<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>In Logstash 1.5 there is a new, special field, called <code class="literal">@metadata</code>.  The contents
of <code class="literal">@metadata</code> will not be part of any of your events at output time, which
makes it great to use for conditionals, or extending and building event fields
with field reference and sprintf formatting.</p><p>The following configuration file will yield events from STDIN.  Whatever is
typed will become the <code class="literal">message</code> field in the event.  The <code class="literal">mutate</code> events in the
filter block will add a few fields, some nested in the <code class="literal">@metadata</code> field.</p><pre class="programlisting prettyprint lang-ruby">input { stdin { } }

filter {
  mutate { add_field =&gt; { "show" =&gt; "This data will be in the output" } }
  mutate { add_field =&gt; { "[@metadata][test]" =&gt; "Hello" } }
  mutate { add_field =&gt; { "[@metadata][no_show]" =&gt; "This data will not be in the output" } }
}

output {
  if [@metadata][test] == "Hello" {
    stdout { codec =&gt; rubydebug }
  }
}</pre><p>Let’s see what comes out:</p><pre class="programlisting prettyprint lang-ruby">$ bin/logstash -f ../test.conf
Logstash startup completed
asdf
{
       "message" =&gt; "asdf",
      "@version" =&gt; "1",
    "@timestamp" =&gt; "2015-03-18T23:09:29.595Z",
          "host" =&gt; "example.com",
          "show" =&gt; "This data will be in the output"
}</pre><p>The "asdf" typed in became the <code class="literal">message</code> field contents, and the conditional
successfully evaluated the contents of the <code class="literal">test</code> field nested within the
<code class="literal">@metadata</code> field.  But the output did not show a field called <code class="literal">@metadata</code>, or
its contents.</p><p>The <code class="literal">rubydebug</code> codec allows you to reveal the contents of the <code class="literal">@metadata</code> field
if you add a config flag, <code class="literal">metadata =&gt; true</code>:</p><pre class="programlisting prettyprint lang-ruby">    stdout { codec =&gt; rubydebug { metadata =&gt; true } }</pre><p>Let’s see what the output looks like with this change:</p><pre class="programlisting prettyprint lang-ruby">$ bin/logstash -f ../test.conf
Logstash startup completed
asdf
{
       "message" =&gt; "asdf",
      "@version" =&gt; "1",
    "@timestamp" =&gt; "2015-03-18T23:10:19.859Z",
          "host" =&gt; "example.com",
          "show" =&gt; "This data will be in the output",
     "@metadata" =&gt; {
           "test" =&gt; "Hello",
        "no_show" =&gt; "This data will not be in the output"
    }
}</pre><p>Now you can see the <code class="literal">@metadata</code> field and its sub-fields.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Only the <code class="literal">rubydebug</code> codec allows you to show the contents of the
<code class="literal">@metadata</code> field.</p></div></div><p>Make use of the <code class="literal">@metadata</code> field any time you need a temporary field but do not
want it to be in the final output.</p><p>Perhaps one of the most common use cases for this new field is with the <code class="literal">date</code>
filter and having a temporary timestamp.</p><p>This configuration file has been simplified, but uses the timestamp format
common to Apache and Nginx web servers.  In the past, you’d have to delete
the timestamp field yourself, after using it to overwrite the <code class="literal">@timestamp</code>
field.  With the <code class="literal">@metadata</code> field, this is no longer necessary:</p><pre class="programlisting prettyprint lang-ruby">input { stdin { } }

filter {
  grok { match =&gt; [ "message", "%{HTTPDATE:[@metadata][timestamp]}" ] }
  date { match =&gt; [ "[@metadata][timestamp]", "dd/MMM/yyyy:HH:mm:ss Z" ] }
}

output {
  stdout { codec =&gt; rubydebug }
}</pre><p>Notice that this configuration puts the extracted date into the
<code class="literal">[@metadata][timestamp]</code> field in the <code class="literal">grok</code> filter.  Let’s feed this
configuration a sample date string and see what comes out:</p><pre class="programlisting prettyprint lang-ruby">$ bin/logstash -f ../test.conf
Logstash startup completed
02/Mar/2014:15:36:43 +0100
{
       "message" =&gt; "02/Mar/2014:15:36:43 +0100",
      "@version" =&gt; "1",
    "@timestamp" =&gt; "2014-03-02T14:36:43.000Z",
          "host" =&gt; "example.com"
}</pre><p>That’s it!  No extra fields in the output, and a cleaner config file because you
do not have to delete a "timestamp" field after conversion in the <code class="literal">date</code> filter.</p><p>Another use case is the CouchDB Changes input plugin (See
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-couchdb_changes" target="_top">https://github.com/logstash-plugins/logstash-input-couchdb_changes</a>).
This plugin automatically captures CouchDB document field metadata into the
<code class="literal">@metadata</code> field within the input plugin itself.  When the events pass through
to be indexed by Elasticsearch, the Elasticsearch output plugin allows you to
specify the <code class="literal">action</code> (delete, update, insert, etc.) and the <code class="literal">document_id</code>, like
this:</p><pre class="programlisting prettyprint lang-ruby">output {
  elasticsearch {
    action =&gt; "%{[@metadata][action]}"
    document_id =&gt; "%{[@metadata][_id]}"
    host =&gt; "example.com"
    index =&gt; "index_name"
    protocol =&gt; "http"
  }
}</pre></div><div class="navfooter"><span class="prev"><a href="_command_line_flags.html">
              « 
              Command-line flags</a>
           
        </span><span class="next">
           
          <a href="config-examples.html">Logstash Configuration Examples
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="http://www.elastic.co/webinars/getting-started-with-elasticsearch/?camp=docs">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?camp=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?camp=docs">Security</a></li>
	</ul>
</div>


	  	

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js"></script>
   	
   	
   	
   	<script type="application/ld+json">
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/logo-elastic.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript">
  jQuery(function() {
    jQuery('#rtpcontainer').prependTo('#guide');
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + (10 + height) + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            </body>
        